(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[64],{p1oR:function(e,t,a){"use strict";var r=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var i=r(a("BMrR"));a("jCWc");var u=r(a("kPKH"));a("fOrg");var n=r(a("+KLJ"));a("miYZ");var o=r(a("tsqr")),c=r(a("p0pE"));a("y8nQ");var d,l,f,h,p=r(a("Vl3Y")),m=a("MuoO"),_=a("7DNP"),v=s(a("q1tI")),g=r(a("8+Sn")),b=r(a("mWxT")),y=r(a("5WY0")),k=r(a("dYZ0")),w=b.default.OauthParameter("oauth_user_id"),E=b.default.OauthParameter("code"),R=b.default.OauthParameter("service_id"),x=(b.default.OauthParameter("oauth_type"),d=(0,m.connect)(e=>{var t=e.user,a=e.global;return{register:t.register,rainbondInfo:a.rainbondInfo,isRegist:a.isRegist}}),l=p.default.create(),d(f=l((h=class extends v.Component{constructor(){super(...arguments),this.state={user_info:null},this.handleSubmit=(e=>{var t=this.props.dispatch;E&&R&&w&&t({type:"user/thirdRegister",payload:(0,c.default)({},e),callback:e=>{e&&""!=e.token&&(g.default.set("token",e.token),t({type:"user/fetchThirdBinding",payload:{service_id:R,oauth_user_id:w},callback:e=>{e&&200==e._code?o.default.success("\u8ba4\u8bc1\u6210\u529f",1,()=>{var e=window.localStorage.getItem("redirect");e&&""!=e||(e="/"),e.startsWith("/")?t(_.routerRedux.push(e)):window.location.href=e}):o.default.warning("\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8ba4\u8bc1",1,()=>{t(_.routerRedux.replace("/user/login"))})}}))}})}),this.changeTime=(()=>{this.setState({time:Date.now()})})}componentDidMount(){this.props.dispatch({type:"user/fetchThirdInfo",payload:{code:E,service_id:R},callback:e=>{e&&200===e._code&&this.setState({user_info:e.bean.user_info})}})}render(){var e=this.props,t=e.isRegist,a=e.dispatch,r=e.rainbondInfo;if(!t)return a(_.routerRedux.replace(E&&R&&w?"/user/login?code=".concat(E,"&service_id=").concat(R):"/user/login")),null;var s=this.state.user_info,o=!b.default.fetchIsFirstRegist(r),c=null;return b.default.OauthbEnable(r)&&r.oauth_services&&r.oauth_services.value&&r.oauth_services.value.map(e=>{e.service_id==R&&(c=e)}),v.default.createElement("div",{className:y.default.main},v.default.createElement(n.default,{style:{margin:"24px 0"},message:"\u6765\u81ea".concat(c&&c.name,"\u767b\u5f55\u7684\n          ").concat(s&&s.oauth_user_name,"\n          \u60a8\u597d\uff01\u4f60\u9700\u8981\u8865\u5145\u5b8c\u6574\u5e73\u53f0\u8d26\u53f7\u4fe1\u606f"),type:"info"}),v.default.createElement(i.default,{style:{marginBottom:"24px"}},v.default.createElement(u.default,{span:10,className:y.default.boxJump},!o&&v.default.createElement(_.Link,{to:"/user/third/login?code=".concat(E,"&service_id=").concat(R,"&oauth_user_id=").concat(w)},"\u5df2\u6709\u8d26\u53f7\uff0c\u9a6c\u4e0a\u7ed1\u5b9a")),v.default.createElement(u.default,{span:10,style:{background:"#CDE2FF"},className:y.default.boxJump,offset:4},v.default.createElement(_.Link,{to:"/user/third/register?code=".concat(E,"&service_id=").concat(R,"&oauth_user_id=").concat(w)},"\u672a\u6709\u8d26\u53f7\uff0c\u521b\u5efa\u8d26\u53f7"))),v.default.createElement(k.default,{user_info:s,onSubmit:this.handleSubmit,type:"thirdRegister"}))}},f=h))||f)||f);t.default=x}}]);