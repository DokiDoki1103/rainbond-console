(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{EK8P:function(e,t,a){"use strict";var l=a("g09b"),p=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i,n,o,s=l(a("2/Rp")),r=a("MuoO"),d=a("7DNP"),c=p(a("q1tI")),u=l(a("vGHg")),h=l(a("q76B")),m=l(a("QDog")),f=l(a("n9hB")),g=(i=(0,r.connect)(e=>{var t=e.loading;return{buildAppsLoading:t.effects["createApp/buildApps"],deleteAppLoading:t.effects["appControl/deleteApp"]}},null,null,{withRef:!0}),i((o=class extends c.PureComponent{constructor(e){super(e),this.loadDetail=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias,p=t.region_name;e({type:"appControl/fetchDetail",payload:{team_name:a,app_alias:l},callback:e=>{this.setState({appDetail:e})},handleError:t=>{var l=f.default.getCode(t);l&&404===l&&e(d.routerRedux.push("/team/".concat(a,"/region/").concat(p,"/exception/404")))}})}),this.handleBuild=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias,p=t.region_name;e({type:"createApp/buildApps",payload:{team_name:a,app_alias:l},callback:t=>{t&&(e({type:"global/fetchGroups",payload:{team_name:a}}),e(d.routerRedux.push("/team/".concat(a,"/region/").concat(p,"/components/").concat(l,"/overview"))))}})}),this.handleDelete=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias,p=t.region_name;e({type:"appControl/deleteApp",payload:{team_name:a,app_alias:l,is_force:!0},callback:()=>{e({type:"global/fetchGroups",payload:{team_name:a}}),e(d.routerRedux.push("/team/".concat(a,"/region/").concat(p,"/index")))}})}),this.showDelete=(()=>{this.setState({showDelete:!0})}),this.fetchParameter=(()=>{return{team_name:m.default.getCurrTeamName(),region_name:m.default.getCurrRegionName(),app_alias:this.getAppAlias()}}),this.state={appDetail:null}}componentDidMount(){this.loadDetail()}componentWillUnmount(){this.props.dispatch({type:"appControl/clearDetail"})}getAppAlias(){return this.props.match.params.appAlias}render(){var e=this.props,t=e.buildAppsLoading,a=e.deleteAppLoading,l=this.state.appDetail||{};return l.service?c.default.createElement("div",null,c.default.createElement("h2",{style:{textAlign:"center"}},"\u9ad8\u7ea7\u8bbe\u7f6e"),c.default.createElement("div",{style:{overflow:"hidden"}},c.default.createElement(u.default,{updateDetail:this.loadDetail,appDetail:l}),c.default.createElement("div",{style:{background:"#fff",padding:"20px",textAlign:"right",position:"fixed",bottom:0,left:0,right:0,zIndex:2,borderTop:"1px solid #e8e8e8"}},c.default.createElement(s.default,{loading:t,style:{marginRight:8},onClick:this.handleBuild,type:"primary"},"\u786e\u8ba4\u521b\u5efa"),c.default.createElement(s.default,{onClick:this.showDelete,type:"default"},"\u653e\u5f03\u521b\u5efa")),this.state.showDelete&&c.default.createElement(h.default,{loading:a,onOk:this.handleDelete,title:"\u653e\u5f03\u521b\u5efa",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u653e\u5f03\u521b\u5efa\u6b64\u5e94\u7528\u5417\uff1f",onCancel:()=>{this.setState({showDelete:!1})}}))):null}},n=o))||n);t.default=g}}]);