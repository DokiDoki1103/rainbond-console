(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"5DSb":function(e,t,a){"use strict";var r=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("MXD1");var s,n,l,o=r(a("CFYs")),d=i(a("q1tI")),u=a("MuoO"),c=(s=(0,u.connect)(e=>{var t=e.global;return{apploadingnum:t.apploadingnum}},null,null,{pure:!1}),s((l=class extends d.Component{constructor(e){super(e),this.saveRef=(e=>{this.element=e}),this.width=0,this.timer=null,this.total=0,this.loaded=0,this.state={width:0,show:!1}}getCurrentWidth(){var e=100;return this.state.width+=.01*(e-this.state.width),this.state.width>90?90:this.state.width}componentWillReceiveProps(e){var t=this.props.apploadingnum,a=e.apploadingnum;t!==a&&(a>0?(this.start(),this.computedWidth()):0===a&&this.completed())}start(){this.timer||(this.setState({width:0,show:!0}),this.computedWidth(),this.timer=setInterval(()=>{this.computedWidth()},this.props.interval||800))}computedWidth(){var e=this.getCurrentWidth();this.setState({width:e})}addRequest(){this.timer?this.computedWidth():this.start()}removeRequest(){this.loaded++,this.total==this.loaded?this.completed():this.computedWidth()}completed(){this.total=this.loaded=0,this.setState({width:100},()=>{setTimeout(()=>{this.setState({show:!1},()=>{this.setState({width:0})})},500)}),clearInterval(this.timer),this.timer=null}render(){return d.default.createElement("div",{ref:this.saveRef,className:"loadingbar",style:{display:this.state.show?"block":"none",zIndex:9999999,height:"3px",position:"fixed",left:0,top:-10,width:"100%"}},d.default.createElement(o.default,{status:"active",size:"small",percent:this.state.width}))}},n=l))||n);t.default=c},W7L6:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuData=void 0;var i=r(a("q1tI")),s=r(a("p0pE")),n=a("+n12"),l=r(a("+iC2")),o=r(a("mWxT"));function d(e,t){var a=l.default.isCompanyAdmin(t),r=i.default.createElement("i",{className:"anticon"},i.default.createElement("svg",{t:"1584693382814",viewBox:"0 0 1024 1024",version:"1.1","p-id":"812",width:"20",height:"20"},i.default.createElement("path",{d:"M512 542.72L286.72 412.16V151.04L512 20.48l225.28 130.56v261.12L512 542.72zM339.2 381.44L512 481.28l172.8-99.84V181.76L512 81.92l-172.8 99.84v199.68zM776.96 1006.08L551.68 875.52V614.4l225.28-130.56L1002.24 614.4v261.12L776.96 1006.08zM602.88 844.8l172.8 99.84L949.76 844.8V645.12l-172.8-99.84-172.8 99.84V844.8zM247.04 1006.08L21.76 875.52V614.4l225.28-130.56L473.6 614.4v261.12L247.04 1006.08zM74.24 844.8l172.8 99.84L421.12 844.8V645.12l-172.8-99.84-174.08 99.84V844.8z",fill:"#9CA2A8","p-id":"813"}))),s=i.default.createElement("i",{className:"anticon"},i.default.createElement("svg",{t:"1585203404203",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18024",width:"20",height:"20"},i.default.createElement("path",{d:"M111.872 42.666667A26.538667 26.538667 0 0 0 85.333333 69.205333v885.589334c0 14.677333 11.861333 26.538667 26.538667 26.538666h800.256a26.538667 26.538667 0 0 0 26.538667-26.538666V69.205333A26.538667 26.538667 0 0 0 912.128 42.666667H111.872z m0-42.666667h800.256C950.357333 0 981.333333 30.976 981.333333 69.205333v885.589334c0 38.229333-30.976 69.205333-69.205333 69.205333H111.872A69.205333 69.205333 0 0 1 42.666667 954.794667V69.205333C42.666667 30.976 73.642667 0 111.872 0z",fill:"#4A4A4A","p-id":"18025"}),i.default.createElement("path",{d:"M661.333333 128a21.333333 21.333333 0 1 1 42.666667 0v160c0 65.706667-61.226667 117.333333-135.125333 117.333333H455.125333C381.226667 405.333333 320 353.706667 320 288V128a21.333333 21.333333 0 0 1 42.666667 0v160c0 40.362667 40.661333 74.666667 92.458666 74.666667h113.749334c51.797333 0 92.458667-34.304 92.458666-74.666667V128z",fill:"#4A4A4A","p-id":"18026"}))),n=[{name:"\u603b\u89c8",icon:"dashboard",path:"/enterprise/".concat(e,"/index"),authority:["admin","user"]},{name:"\u5e94\u7528\u5e02\u573a",icon:"share-alt",path:"/enterprise/".concat(e,"/shared"),authority:["admin","user"]}];return o.default.isEnableBillingFunction()&&n.push({name:"\u8ba2\u8d2d",icon:s,path:"/enterprise/".concat(e,"/orders/overviewService"),authority:["admin","user"]}),n.push({name:"\u56e2\u961f",icon:"team",path:"/enterprise/".concat(e,"/teams"),authority:["admin","user"]}),a&&n.push({name:"\u96c6\u7fa4",icon:r,path:"/enterprise/".concat(e,"/clusters"),authority:["admin","user"]},{name:"\u7528\u6237",icon:"user",path:"/enterprise/".concat(e,"/users"),authority:["admin","user"]},{name:"\u8bbe\u7f6e",icon:"setting",path:"/enterprise/".concat(e,"/setting"),authority:["admin","user"]}),n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return e.map(e=>{var r=e.path;(0,n.isUrl)(r)||(r=t+e.path);var i=(0,s.default)({},e,{path:r,authority:e.authority||a});return e.children&&(i.children=u(e.children,"".concat(t).concat(e.path,"/"),e.authority)),i})}var c=(e,t)=>{var a=u(d(e,t));return a};t.getMenuData=c},uHcJ:function(e,t,a){"use strict";var r=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("B9cy");var s,n=i(a("Ol7k")),l=i(a("TSYQ")),o=a("MuoO"),d=a("7DNP"),u=a("4zCG"),c=i(a("XaGS")),h=i(a("Wwog")),p=i(a("bALw")),m=i(a("17x9")),f=a("s4NR"),v=r(a("q1tI")),g=a("E6Dt"),b=i(a("ZFw/")),y=i(a("W2Kv")),E=a("W7L6"),w=i(a("/VoG")),C=i(a("NtFa")),M=i(a("h3zL")),x=i(a("CmFy")),L=i(a("5DSb")),W=i(a("xqX8")),A=i(a("AgvA")),I=i(a("IamK")),N=i(a("HZnN")),S=i(a("QDog")),_=i(a("mWxT")),z=i(a("+iC2")),R=i(a("R1Dz")),T=(a("cr+I"),n.default.Content),V=(0,h.default)(e=>{var t={},a=e=>{e.forEach(e=>{e.children&&a(e.children),t[e.path]=e})};return a(e),t},c.default),D={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}};(0,u.enquireScreen)(e=>{s=e});class k extends v.PureComponent{constructor(e){super(e),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"global/fetchEnterpriseList",callback:e=>{e&&200===e._code&&this.setState({enterpriseList:e.list,ready:!0},()=>{this.redirectEnterpriseView(),this.load()})}})}),this.loadClusters=(e=>{var t=this.props,a=t.dispatch,r=t.currentUser;a({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:e,check_status:"no"},callback:t=>{var i=z.default.isCompanyAdmin(r);t&&t.list&&0==t.list.length&&i&&a(d.routerRedux.push("/enterprise/".concat(e,"/addCluster?init=true")))}})}),this.load=(()=>{(0,u.enquireScreen)(e=>{this.setState({isMobile:e})})}),this.getChildContext=(()=>{var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}),this.matchParamsPath=(e=>{var t=Object.keys(this.breadcrumbNameMap).find(t=>{return(0,p.default)(t).test(e)});return this.breadcrumbNameMap[t]}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.redirectEnterpriseView=(()=>{var e=this.props,t=e.dispatch,a=e.currentUser,r=e.rainbondInfo,i=e.match.params.eid,s=this.state.enterpriseList;if(i&&"auto"!==i)s.map(e=>{return e.enterprise_id===i&&(this.fetchEnterpriseInfo(i),S.default.putLog(Object.assign(r,e)),this.setState({enterpriseInfo:e})),e});else if(s.length>0){var n=null;s.map(e=>{return e.enterprise_id===a.enterprise_id&&(n=e),e}),null==n&&(n=s[0]),S.default.putLog(Object.assign(r,n)),this.fetchEnterpriseInfo(n.enterprise_id),this.setState({enterpriseInfo:n}),t(d.routerRedux.replace("/enterprise/".concat(n.enterprise_id,"/index")))}else t(d.routerRedux.push("/user/login"))}),this.fetchEnterpriseInfo=(e=>{if(!e)return null;var t=this.props.dispatch;this.loadClusters(e),t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:e}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.breadcrumbNameMap=V((0,E.getMenuData)(this.props.groups)),this.state={isMobile:s,isInit:!1,showWelcomeCreateTeam:!1,canCancelOpenRegion:!0,enterpriseList:[],enterpriseInfo:!1,ready:!1}}componentDidMount(){this.getEnterpriseList()}getContext(){var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}render(){var e=this.props,t=e.currentUser,a=e.collapsed,r=e.location,i=e.location.pathname,s=e.match.params.eid,o=e.orders,u=e.children,c=e.rainbondInfo,h=e.enterprise,p=e.showAuthCompany,m=this.state,S=m.enterpriseList,z=m.enterpriseInfo,V=m.ready,k=a?"calc(100% - 416px)":"calc(100% - 116px)",O=_.default.isEnableBillingFunction(),P=(0,f.stringify)({redirect:window.location.href});if(!V||!z)return v.default.createElement(W.default,null);if(!t||!c||0===S.length)return v.default.createElement(d.Redirect,{to:"/user/login?".concat(P)});var q=_.default.fetchLogo(c,h)||y.default,U=()=>{return v.default.createElement("div",{className:M.default.enterprise},h&&h.enterprise_alias||z&&z.enterprise_alias)},j=()=>{return v.default.createElement(n.default,null,v.default.createElement(I.default,{currentEnterprise:z,enterpriseList:S,currentUser:t,logo:q,Authorized:N.default,collapsed:a,location:r,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse}),v.default.createElement(n.default,null,v.default.createElement(C.default,{eid:s,logo:q,isPubCloud:c&&c.is_public&&c.is_public.enable,currentUser:t,collapsed:a,onCollapse:this.handleMenuCollapse,isMobile:this.state.isMobile,customHeader:U}),v.default.createElement(n.default,{style:{flexDirection:"row"}},v.default.createElement(x.default,{currentEnterprise:z,enterpriseList:S,title:c&&c.title&&c.title.enable&&c.title.value,currentUser:t,Authorized:N.default,menuData:(0,E.getMenuData)(s,t),showMenu:!0,pathname:i,location:r,isMobile:this.state.isMobile,collapsed:a,onCollapse:this.handleMenuCollapse}),v.default.createElement(T,{key:s,style:{height:"calc(100vh - 64px)",overflow:"auto",width:k}},v.default.createElement("div",{style:{margin:"24px 24px 0"}},v.default.createElement(N.default,{logined:!0,authority:["admin","user"],noMatch:v.default.createElement(d.Redirect,{to:"/user/login"})},u))))))},F=_.default.fetchSiteTitle(c);return v.default.createElement(v.Fragment,null,v.default.createElement(b.default,{title:F},v.default.createElement(g.ContainerQuery,{query:D},e=>v.default.createElement(R.default.Provider,{value:this.getContext()},v.default.createElement("div",{className:(0,l.default)(e)},j())))),v.default.createElement(L.default,null),p&&v.default.createElement(w.default,{eid:s,marketName:p,currStep:0}),o&&O&&v.default.createElement(A.default,{eid:s,orders:o}))}}k.childContextTypes={location:m.default.object,breadcrumbNameMap:m.default.object,currRegion:m.default.string,currTeam:m.default.string};var O=(0,o.connect)(e=>{var t=e.user,a=e.global,r=e.index,i=e.loading;return{currentUser:t.currentUser,notifyCount:t.notifyCount,collapsed:a.collapsed,groups:a.groups,fetchingNotices:i.effects["global/fetchNotices"],notices:a.notices,currTeam:S.default.getCurrTeamName(),currRegion:S.default.getCurrRegionName(),rainbondInfo:a.rainbondInfo,payTip:a.payTip,memoryTip:a.memoryTip,noMoneyTip:a.noMoneyTip,showAuthCompany:a.showAuthCompany,orders:a.orders,overviewInfo:r.overviewInfo,nouse:a.nouse,enterprise:a.enterprise}})(k);t.default=O}}]);