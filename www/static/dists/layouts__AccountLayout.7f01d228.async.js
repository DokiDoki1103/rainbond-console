(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"qzb/":function(e,t,r){"use strict";var a=r("tAuX"),n=r("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("B9cy");var l,i=n(r("Ol7k")),s=a(r("q1tI")),o=r("MuoO"),d=r("7DNP"),c=n(r("ZFw/")),u=r("E6Dt"),p=n(r("TSYQ")),f=r("s4NR"),h=r("4zCG"),m=n(r("R1Dz")),E=n(r("IamK")),v=n(r("NtFa")),g=n(r("xqX8")),b=n(r("h3zL")),y=n(r("HZnN")),x=n(r("mWxT")),C=n(r("W2Kv")),w=i.default.Content;(0,h.enquireScreen)(e=>{l=e});class L extends s.PureComponent{constructor(e){super(e),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"user/fetchCurrent"}),e({type:"global/fetchEnterpriseList",callback:e=>{e&&200===e._code&&this.setState({enterpriseList:e.list,ready:!0},()=>{this.fetchEnterpriseInfo()})}})}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,r=e.currentUser;r&&r.enterprise_id&&t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:r.enterprise_id}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.state={ready:!1,isMobiles:l,enterpriseList:[]}}componentDidMount(){this.getEnterpriseList()}getContext(){var e=this.props.location;return{location:e}}render(){var e=this.props,t=e.children,r=e.currentUser,a=e.rainbondInfo,n=e.collapsed,l=e.enterprise,o=e.location,h=(e.location.pathname,this.state),L=h.enterpriseList,M=h.isMobiles,_=h.ready,W=x.default.fetchLogo(a,l)||C.default;if(!_||!l)return s.default.createElement(g.default,null);var I=(0,f.stringify)({redirect:window.location.href});if(!r||!a||0===L.length)return s.default.createElement(d.Redirect,{to:"/user/login?".concat(I)});var k={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}},N="calc(100% -48px)",S=()=>{return s.default.createElement("div",{className:b.default.enterprise},s.default.createElement(d.Link,{to:"/enterprise/".concat(r.enterprise_id,"/index")},l&&l.enterprise_alias))},U=()=>{return s.default.createElement(i.default,null,s.default.createElement(E.default,{currentEnterprise:r,enterpriseList:L,currentUser:r,logo:W,Authorized:y.default,collapsed:n,location:o,isMobile:M,onCollapse:this.handleMenuCollapse}),s.default.createElement(i.default,null,s.default.createElement(v.default,{logo:W,isPubCloud:a&&a.is_public&&a.is_public.enable,currentUser:r,collapsed:n,onCollapse:this.handleMenuCollapse,isMobile:M,customHeader:S}),s.default.createElement(w,{key:"sdfds",style:{height:"calc(100vh - 64px)",overflow:"auto",width:N}},s.default.createElement("div",{style:{margin:"24px 24px 0"}},s.default.createElement(y.default,{logined:!0,authority:["admin","user"],noMatch:s.default.createElement(d.Redirect,{to:"/user/login"})},t)))))},q=x.default.fetchSiteTitle(a);return s.default.createElement(s.Fragment,null,s.default.createElement(c.default,{title:q},s.default.createElement(u.ContainerQuery,{query:k},e=>s.default.createElement(m.default.Provider,{value:this.getContext()},s.default.createElement("div",{className:(0,p.default)(e)},U())))))}}var M=(0,o.connect)(e=>{var t=e.user,r=e.global;e.order;return{currentUser:t.currentUser,rainbondInfo:r.rainbondInfo,collapsed:r.collapsed,enterprise:r.enterprise}})(L);t.default=M}}]);