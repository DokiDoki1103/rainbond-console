(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"EAv/":function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("OaEy");var r,n,i,d=l(a("2fM7")),o=s(a("q1tI")),u=a("MuoO"),c=l(a("8+Sn")),h=d.default.Option,p=(r=(0,u.connect)(),r((i=class extends o.Component{constructor(e){super(e),this.handleSearch=(e=>{var t=this.props,a=t.eid,l=t.dispatch;l({type:"global/searchTenant",payload:{eid:a,tenant:e},callback:e=>{e&&200===e._code&&e.bean&&this.setState({data:e.bean.list||[]})}})}),this.handleChange=(e=>{var t=this.props.onChange;this.setState({tenant:e},()=>{t&&t(e)})}),this.handleSelect=(e=>{var t=this.props.onSelect,a=this.state.data;if(t){var l=a.filter(t=>t.team_name===e);l&&l.length>0&&(c.default.set("region_name",l[0].region),c.default.set("team_name",e)),t(e)}}),this.state={data:[],tenant:void 0}}componentDidMount(){this.handleSearch()}componentWillUnmount(){this.setState({data:[],tenant:""})}render(){var e=this.props,t=e.placeholder,a=e.style,l=this.state,s=l.data,r=l.tenant;return o.default.createElement(d.default,{showSearch:!0,placeholder:t,value:r,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:this.handleChange,notFoundContent:null,onSearch:this.handleSearch,style:a,onSelect:this.handleSelect},s.map(e=>o.default.createElement(h,{value:e.team_name,key:e.team_alias},e.team_alias)))}},n=i))||n),m=p;t.default=m},L24g:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV")),n=l(a("jehZ"));a("5NDa");var i=l(a("5rEg"));a("OaEy");var d=l(a("2fM7"));a("y8nQ");var o,u,c,h=l(a("Vl3Y")),p=s(a("q1tI")),m=a("MuoO"),f=l(a("EAv/")),g=l(a("e6Ls")),v=h.default.Item,b=d.default.Option,E=(o=(0,m.connect)(),o((c=class extends p.PureComponent{constructor(e){super(e),this.handleSelect=(e=>{var t=this.props,a=t.dispatch,l=t.form,s=l.setFieldsValue;a({type:"teamControl/fetchTeamRoles",payload:{team_name:e},callback:e=>{e&&this.setState({authorityList:e.list},()=>{s({role_ids:[]})})}})}),this.checkAccount=((e,t,a)=>{t?t&&t.length<8?a("\u5bc6\u7801\u957f\u5ea6\u81f3\u5c11\u4e3a8\u4f4d"):a():a("\u8bf7\u586b\u5199\u5bc6\u7801")}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={authorityList:[]}}render(){var e=this.props,t=e.eid,a=e.onCancel,l=e.title,s=e.userInfo,o=e.form,u=o.getFieldDecorator,c=this.state.authorityList,m={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}};return p.default.createElement(r.default,{visible:!0,maskClosable:!1,title:l||"\u6dfb\u52a0\u7528\u6237",className:g.default.TelescopicModal,onOk:this.handleSubmit,onCancel:a},p.default.createElement(h.default,{onSubmit:this.handleSubmit},!s&&p.default.createElement(v,(0,n.default)({},m,{label:"\u7528\u6237\u540d"}),u("user_name",{initialValue:s?s.nick_name:"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u540d!"},{pattern:/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/,message:"\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e2d\u6587\u3001_\u548c-\u7ec4\u5408"}]})(p.default.createElement(i.default,{placeholder:"\u8bf7\u586b\u5199\u7528\u6237\u540d!"}))),p.default.createElement(v,(0,n.default)({},m,{label:"\u59d3\u540d"}),u("real_name",{initialValue:s&&s.real_name||"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d!"}]})(p.default.createElement(i.default,{type:"text",placeholder:"\u8bf7\u586b\u5199\u59d3\u540d!"}))),p.default.createElement(v,(0,n.default)({},m,{label:"\u5bc6\u7801"}),u("password",{initialValue:s&&s.password||"",rules:[{required:!0,validator:this.checkAccount}]})(p.default.createElement(i.default.Password,{placeholder:"\u8bf7\u586b\u5199\u5bc6\u7801"}))),!s&&p.default.createElement("div",null,p.default.createElement(v,(0,n.default)({},m,{label:"\u90ae\u7bb1"}),u("email",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u90ae\u7bb1!"},{type:"email",message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e!"}]})(p.default.createElement(i.default,{type:"text",placeholder:"\u8bf7\u586b\u5199\u90ae\u7bb1!"}))),p.default.createElement(v,(0,n.default)({},m,{label:"\u6240\u5c5e\u56e2\u961f"}),u("tenant_name",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u56e2\u961f!"}]})(p.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0\u8fdb\u884c\u67e5\u8be2",eid:t,onSelect:this.handleSelect}))),p.default.createElement(v,(0,n.default)({},m,{label:"\u89d2\u8272\u6743\u9650"}),u("role_ids",{initialValue:[],rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272!"}]})(p.default.createElement(d.default,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272"},c.map(e=>{var t=e.ID,a=e.name;return p.default.createElement(b,{key:t,value:t},a)})))))))}},u=c))||u),y=h.default.create()(E),_=y;t.default=_},iOcZ:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("g9YV");var n=l(a("wCAj"));a("14J3");var i=l(a("BMrR"));a("jCWc");var d=l(a("kPKH"));a("+L6B");var o=l(a("2/Rp"));a("5NDa");var u=l(a("5rEg"));a("/xke");var c=l(a("TeRw")),h=l(a("p0pE"));a("y8nQ");var p,m,f,g=l(a("Vl3Y")),v=s(a("q1tI")),b=a("MuoO"),E=a("7DNP"),y=l(a("wd/R")),_=l(a("q76B")),S=l(a("L24g")),C=l(a("XZXw")),w=l(a("AklW")),k=l(a("+iC2")),I=g.default.Item,U=(p=(0,b.connect)(e=>{var t=e.user,a=e.list,l=e.loading,s=e.global,r=e.index;return{user:t.currentUser,list:a,loading:l.models.list,rainbondInfo:s.rainbondInfo,enterprise:s.enterprise,isRegist:s.isRegist,oauthLongin:l.effects["global/creatOauth"],overviewInfo:r.overviewInfo}}),p((f=class extends v.PureComponent{constructor(e){super(e),this.onPageChange=((e,t)=>{this.setState({page:e,pageSize:t},()=>{this.loadUser()})}),this.handleCreatUser=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid,s=this.state.userInfo;if(s)return this.upUser(e),null;a({type:"global/creatUser",payload:(0,h.default)({enterprise_id:l},e),callback:e=>{e&&200===e._condition&&(this.loadUser(),this.cancelCreatUser(),c.default.success({message:e.msg_show||""}))},handleError:e=>{e&&e.data&&e.data.code&&e.data.code<600&&e.data.msg_show?c.default.warning({message:e.data.msg_show}):w.default.handleCloudAPIError(e)}})}),this.upUser=(e=>{var t=this.state.userInfo,a=t;a.real_name=e.real_name,a.password=e.password;var l=this.props,s=l.dispatch,r=l.match.params.eid;s({type:"global/upEnterpriseUsers",payload:(0,h.default)({},a,{enterprise_id:r}),callback:e=>{e&&200===e._condition&&(this.cancelCreatUser(),this.loadUser(),c.default.success({message:"\u7f16\u8f91\u6210\u529f"}))}})}),this.handleDelete=(()=>{var e=this.state.userInfo,t=this.props,a=t.dispatch,l=t.match.params.eid;a({type:"global/deleteEnterpriseUsers",payload:{user_id:e.user_id,enterprise_id:l},callback:e=>{e&&200===e._condition&&(this.loadUser(),this.cancelDelUser(),c.default.success({message:"\u5220\u9664\u6210\u529f"}))}})}),this.loadUser=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,l=this.state,s=l.page,r=l.pageSize,n=l.name;t({type:"global/fetchEnterpriseUsers",payload:{enterprise_id:a,page:s,page_size:r,name:n},callback:e=>{e&&this.setState({adminList:e.list,total:e.total})}})}),this.addUser=(()=>{this.setState({userVisible:!0,text:"\u65b0\u589e\u7528\u6237"})}),this.cancelCreatUser=(()=>{this.setState({userVisible:!1,text:"",userInfo:!1})}),this.handleEdit=(e=>{this.setState({userInfo:e,userVisible:!0,text:"\u7f16\u8f91\u7528\u6237"})}),this.delUser=(e=>{this.setState({delVisible:!0,userInfo:e})}),this.cancelDelUser=(()=>{this.setState({delVisible:!1,userInfo:!1})}),this.handleSearch=(e=>{this.loadUser()}),this.handelChange=(e=>{this.setState({name:e.target.value})});var t=this.props.user,a=k.default.isCompanyAdmin(t);this.state={page:1,pageSize:10,adminer:a,adminList:[],total:0,userVisible:!1,userInfo:!1,text:"",delVisible:!1,name:""}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(E.routerRedux.push("/"))}componentDidMount(){this.loadUser()}render(){var e=this.state,t=e.adminList,a=e.adminer,l=e.text,s=e.userInfo,c=e.delVisible,h=e.userVisible,p=e.page,m=e.pageSize,f=e.total,b=this.props.match.params.eid,E=[{title:"\u7528\u6237\u540d\u79f0",dataIndex:"nick_name",rowKey:"nick_name",align:"center"},{title:"\u59d3\u540d",dataIndex:"real_name",rowKey:"real_name",align:"center"},{title:"\u90ae\u7bb1",dataIndex:"email",rowKey:"email",align:"center"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",rowKey:"create_time",align:"center",render:e=>{return v.default.createElement("span",null,(0,y.default)(e).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u64cd\u4f5c",dataIndex:"user_id",align:"center",rowKey:"user_id",render:(e,t)=>{return[v.default.createElement("a",{onClick:()=>{this.delUser(t)}},"\u5220\u9664"),v.default.createElement("a",{onClick:()=>{this.handleEdit(t)}},"\u7f16\u8f91")]}}];return v.default.createElement(C.default,{title:"\u7528\u6237\u7ba1\u7406",content:"\u4f01\u4e1a\u7528\u6237\u67e5\u8be2\u3001\u6dfb\u52a0\u548c\u4fee\u6539\u76f8\u5173\u529f\u80fd\uff0c\u7528\u6237\u9700\u8981\u64cd\u4f5c\u5e94\u7528\u6216\u7ec4\u4ef6\u76f8\u5173\u8d44\u6e90\u65f6\u9700\u8981\u5c06\u5176\u5206\u914d\u5230\u76f8\u5e94\u7684\u56e2\u961f"},v.default.createElement(i.default,{style:{marginBottom:"20px",display:"flex",alignItems:"center"}},v.default.createElement(d.default,{span:12},v.default.createElement(g.default,{layout:"inline",style:{display:"inline-block"}},v.default.createElement(I,null,v.default.createElement(u.default,{placeholder:"\u641c\u7d22\u7528\u6237",onChange:this.handelChange.bind(this),onPressEnter:this.handleSearch,style:{width:250}})),v.default.createElement(I,null,v.default.createElement(o.default,{type:"primary",onClick:this.handleSearch,icon:"search"},"\u641c\u7d22")))),v.default.createElement(d.default,{span:12,style:{textAlign:"right"}},a&&v.default.createElement(o.default,{type:"primary",icon:"plus",style:{float:"right"},onClick:this.addUser},"\u65b0\u589e\u7528\u6237"))),v.default.createElement(r.default,null,c&&v.default.createElement(_.default,{onOk:this.handleDelete,title:"\u5220\u9664\u7528\u6237",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7528\u6237\u5417\uff1f",onCancel:this.cancelDelUser}),h&&v.default.createElement(S.default,{eid:b,userInfo:s,title:l,onOk:this.handleCreatUser,onCancel:this.cancelCreatUser}),v.default.createElement(n.default,{size:"middle",pagination:{current:p,pageSize:m,total:f,onChange:this.onPageChange},dataSource:t,columns:E})))}},m=f))||m);t.default=U}}]);