(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{VcYV:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var n=l(a("W9HT"));a("R9oj");var i=l(a("ECub"));a("IzEo");var m=l(a("bx4M"));a("qVdP");var d=l(a("jsC+"));a("14J3");var r=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("lUTK");var h=l(a("BvKs"));a("+L6B");var u=l(a("2/Rp"));a("Pwec");var p=l(a("CtXQ"));a("/xke");var c=l(a("TeRw"));a("DjyN");var f=l(a("NUBc"));a("5NDa");var g,T,E,y=l(a("5rEg")),w=a("MuoO"),v=a("7DNP"),_=s(a("q1tI")),A=l(a("kN/N")),C=l(a("q76B")),x=l(a("9uC9")),b=l(a("n/Qs")),S=l(a("XZXw")),k=l(a("hMqj")),N=l(a("+iC2")),L=l(a("pJo4")),D=y.default.Search,M=(g=(0,w.connect)(e=>{var t=e.user,a=e.loading;return{user:t.currentUser,createTeamLoading:a.effects["teamControl/createTeam"]}}),g((E=class extends _.PureComponent{constructor(e){var t;super(e),t=this,this.onPageChangeUserTeam=((e,t)=>{this.setState({page:e,pageSize:t},()=>{this.getUserTeams()})}),this.onPageChangeTeam=((e,t)=>{this.setState({page:e,pageSize:t},()=>{this.getEnterpriseTeams()})}),this.getEnterpriseTeams=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,l=this.state,s=l.page,n=l.page_size,i=l.name;t({type:"global/fetchEnterpriseTeams",payload:{page:s,page_size:n,enterprise_id:a,name:i},callback:e=>{e&&200===e._code&&this.setState({total:e.bean&&e.bean.total_count||1,teamList:e.bean&&e.bean.list||[],enterpriseTeamsLoading:!1})}})}),this.getUserTeams=(()=>{var e=this.props,t=e.dispatch,a=e.user,l=e.match.params.eid,s=this.state,n=s.page,i=s.page_size,m=s.name;t({type:"global/fetchUserTeams",payload:{enterprise_id:l,user_id:a.user_id,page:n,page_size:i,name:m},callback:e=>{e&&200===e._code&&this.setState({userTeamList:e.list,userTeamsLoading:!1})}})}),this.load=(()=>{this.state.adminer&&this.getEnterpriseTeams(),this.getOverviewTeam(),this.getUserTeams()}),this.handleSearchTeam=(e=>{this.setState({page:1,name:e},()=>{this.getEnterpriseTeams()})}),this.handlePaginations=(()=>_.default.createElement(f.default,{current:this.state.page,pageSize:this.state.page_size,total:Number(this.state.total),onChange:this.onPageChangeTeam})),this.handleSearchUserTeam=(e=>{this.setState({page:1,name:e},()=>{this.getUserTeams()})}),this.handleCreateTeam=(e=>{this.props.dispatch({type:"teamControl/createTeam",payload:e,callback:()=>{c.default.success({message:"\u6dfb\u52a0\u6210\u529f"}),this.load(),this.cancelCreateTeam()}})}),this.getOverviewTeam=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchOverviewTeam",payload:{enterprise_id:a},callback:e=>{e&&200===e._code&&this.setState({overviewTeamsLoading:!1,overviewTeamInfo:e.bean})}})}),this.onAddTeam=(()=>{this.setState({showAddTeam:!0})}),this.cancelCreateTeam=(()=>{this.setState({showAddTeam:!1})}),this.showExitTeam=(e=>{this.setState({showExitTeam:!0,exitTeamName:e})}),this.handleExitTeam=(()=>{var e=this.state.exitTeamName;this.props.dispatch({type:"teamControl/exitTeam",payload:{team_name:e},callback:e=>{e&&200===e._code&&(this.getOverviewTeam(),this.getUserTeams(),this.hideExitTeam())}})}),this.hideExitTeam=(()=>{this.setState({showExitTeam:!1,exitTeamName:""})}),this.showApply=(e=>{this.setState({showDelApply:!0,ApplyInfo:e})}),this.hideDelApply=(()=>{this.setState({showDelApply:!1,ApplyInfo:!1})}),this.handleActiveTabs=(e=>{this.setState({name:"",page:1},()=>{"team"===e?(this.getOverviewTeam(),this.getUserTeams()):this.getEnterpriseTeams()})}),this.showCloseAllComponent=(e=>{this.setState({showCloseAllComponent:!0,exitTeamName:e})}),this.hideCloseAllComponent=(()=>{this.setState({showCloseAllComponent:!1,exitTeamName:""})}),this.showDelTeam=(e=>{this.setState({showDelTeam:!0,exitTeamName:e})}),this.hideDelTeam=(()=>{this.setState({showExitTeam:!1,showDelTeam:!1})}),this.handleCloseAllComponentInTeam=(()=>{var e=this.state,t=e.exitTeamName,a=e.closeTeamComponentLoading;a||(this.setState({closeTeamComponentLoading:!0}),this.props.dispatch({type:"teamControl/stopComponentInTeam",payload:{team_name:t},callback:e=>{this.setState({closeTeamComponentLoading:!1}),e&&200===e._code&&c.default.success({message:"\u64cd\u4f5c\u6210\u529f\uff0c\u7ec4\u4ef6\u6b63\u5728\u5173\u95ed\u4e2d"}),this.hideCloseAllComponent()},handleError:e=>{e.data&&c.default.warning({message:e.data.msg_show}),c.default.warning({message:"\u64cd\u4f5c\u9047\u5230\u6545\u969c\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"}),this.setState({closeTeamComponentLoading:!1})}}))}),this.handleDelTeam=(()=>{var e=this.state,t=e.exitTeamName,a=e.delTeamLoading;a||(this.setState({delTeamLoading:!0}),this.props.dispatch({type:"teamControl/delTeam",payload:{team_name:t},callback:e=>{this.setState({delTeamLoading:!1}),e&&200===e._code&&(this.getEnterpriseTeams(),this.hideDelTeam(),c.default.success({message:"\u56e2\u961f\u5220\u9664\u6210\u529f"}))},handleError:e=>{e.data&&c.default.warning({message:e.data.msg_show}),this.setState({delTeamLoading:!1})}}))}),this.handleDelApply=(()=>{var e=this.state.ApplyInfo;this.props.dispatch({type:"teamControl/undoTeamUsers",payload:{team_name:e.team_name},callback:()=>{c.default.success({message:"\u64a4\u9500\u7533\u8bf7\u6210\u529f"}),this.getOverviewTeam(),this.hideDelApply()}})}),this.handleJoinTeam=(e=>{this.props.dispatch({type:"global/joinTeam",payload:e,callback:()=>{c.default.success({message:"\u7533\u8bf7\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u5ba1\u6838"}),this.getOverviewTeam(),this.cancelJoinTeam()}})}),this.onJoinTeam=(()=>{this.setState({joinTeam:!0})}),this.cancelJoinTeam=(()=>{this.setState({joinTeam:!1})}),this.showRegions=function(e,a){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.map(a=>{return _.default.createElement(u.default,{key:"".concat(a.region_name,"region"),className:L.default.regionShow,onClick:()=>{l?t.handleJoinTeams(e,a.region_name):t.onJumpTeam(e,a.region_name)}},a.region_alias,_.default.createElement(p.default,{type:"right"}))})},this.handleJoinTeams=((e,t)=>{var a=this.props.dispatch;a({type:"teamControl/joinTeam",payload:{team_name:e},callback:a=>{a&&200===a._code&&this.onJumpTeam(e,t)}})}),this.onJumpTeam=((e,t)=>{var a=this.props.dispatch;a(v.routerRedux.push("/team/".concat(e,"/region/").concat(t,"/index")))});var a=this.props.user,l=N.default.isCompanyAdmin(a);this.state={teamList:[],userTeamList:[],overviewTeamInfo:!1,showAddTeam:!1,showExitTeam:!1,showDelApply:!1,ApplyInfo:!1,exitTeamName:"",enterpriseTeamsLoading:!1,userTeamsLoading:!0,overviewTeamsLoading:!0,adminer:l,showDelTeam:!1,page:1,page_size:10,name:"",total:1,joinTeam:!1,delTeamLoading:!1}}componentDidMount(){var e=this.props.user;e&&this.load()}render(){var e=this.props.match.params.eid,t=this.state,a=t.teamList,l=t.overviewTeamInfo,s=t.enterpriseTeamsLoading,c=t.overviewTeamsLoading,f=t.adminer,g=t.userTeamList,T=t.userTeamsLoading,E=t.delTeamLoading,y=t.showCloseAllComponent,w=t.closeTeamComponentLoading,v=l&&l.request_join_team.filter(e=>{if(0===e.is_pass)return e}),N=v.length>0,M=g&&g.length>0&&g,J=()=>_.default.createElement("svg",{t:"1581212425061",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1314",width:"32",height:"32"},_.default.createElement("path",{d:"M512 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1315",fill:"#999999"}),_.default.createElement("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1316",fill:"#999999"}),_.default.createElement("path",{d:"M512 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1317",fill:"#999999"})),I=e=>{return _.default.createElement(h.default,null,_.default.createElement(h.default.Item,null,_.default.createElement("a",{onClick:()=>{this.showExitTeam(e)}},"\u9000\u51fa\u56e2\u961f")))},R=e=>{return _.default.createElement(h.default,null,_.default.createElement(h.default.Item,null,_.default.createElement("a",{onClick:()=>{this.showApply(e)}},"\u64a4\u9500\u7533\u8bf7")))},O=e=>{return _.default.createElement(h.default,null,_.default.createElement(h.default.Item,null,_.default.createElement("a",{onClick:()=>{this.showCloseAllComponent(e)}},"\u5173\u95ed\u6240\u6709\u7ec4\u4ef6")),_.default.createElement(h.default.Item,null,_.default.createElement("a",{onClick:()=>{this.showDelTeam(e)}},"\u5220\u9664\u56e2\u961f")))},U=_.default.createElement(o.default,{span:7,style:{textAlign:"right"},className:L.default.btns},f&&_.default.createElement(u.default,{type:"primary",onClick:this.onAddTeam,style:{marginRight:"5px"}},"\u521b\u5efa\u56e2\u961f"),!f&&_.default.createElement(u.default,{type:"primary",onClick:this.onJoinTeam},"\u52a0\u5165\u56e2\u961f")),j=_.default.createElement("div",null,_.default.createElement(r.default,{style:{display:"flex",alignItems:"center",marginBottom:"20px"}},_.default.createElement(o.default,{span:2,className:L.default.teamsTit,style:{marginBottom:"0"}},"\u5168\u90e8\u56e2\u961f"),_.default.createElement(o.default,{span:15,style:{textAlign:"left"}},_.default.createElement(D,{style:{width:"500px"},placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0\u8fdb\u884c\u641c\u7d22",onSearch:this.handleSearchTeam})),U),_.default.createElement(r.default,{className:L.default.teamMinTit,type:"flex",align:"middle"},_.default.createElement(o.default,{span:6},"\u56e2\u961f\u540d\u79f0"),_.default.createElement(o.default,{span:3},"\u62e5\u6709\u4eba"),_.default.createElement(o.default,{span:11},"\u96c6\u7fa4")),a.map(e=>{var t=e.team_id,a=e.team_alias,l=e.region_list,s=e.owner_name,n=e.team_name;return _.default.createElement(m.default,{key:t,style:{marginTop:"10px"},hoverable:!0,bodyStyle:{padding:0}},_.default.createElement(r.default,{type:"flex",align:"middle",className:L.default.pl24},_.default.createElement(o.default,{span:6},a),_.default.createElement(o.default,{span:3},s),_.default.createElement(o.default,{span:14},this.showRegions(n,l,!0)),_.default.createElement(o.default,{span:1,className:L.default.bor},_.default.createElement(d.default,{overlay:O(n),placement:"bottomLeft"},_.default.createElement(p.default,{component:J,style:{width:"100%"}})))))}),_.default.createElement("div",{style:{textAlign:"right",margin:"15px"}},this.handlePaginations())),B=_.default.createElement("div",null,_.default.createElement(r.default,null,_.default.createElement(o.default,{span:17,className:L.default.teamsTit},N&&"\u6700\u65b0\u52a0\u5165\u56e2\u961f"),U),N&&_.default.createElement(r.default,{className:L.default.teamMinTit,type:"flex",align:"middle"},_.default.createElement(o.default,{span:6},"\u56e2\u961f\u540d\u79f0"),_.default.createElement(o.default,{span:6},"\u62e5\u6709\u4eba"),_.default.createElement(o.default,{span:12},"\u72b6\u6001")),v&&v.map(e=>{var t=e.is_pass,a=e.team_id,l=e.team_name,s=e.team_alias,n=e.owner_name;e.role;return _.default.createElement(m.default,{key:a,style:{marginTop:"10px",borderLeft:0===t&&"6px solid #4D73B1"},bodyStyle:{padding:0},hoverable:!0},_.default.createElement(r.default,{type:"flex",className:L.default.pl24,align:"middle",key:a},_.default.createElement(o.default,{span:6},s),_.default.createElement(o.default,{span:6},n),_.default.createElement(o.default,{span:11,style:{color:0===t&&"#999999"}},0===t&&_.default.createElement("span",null,_.default.createElement("img",{src:A.default,alt:""}),"\xa0\u7533\u8bf7\u52a0\u5165\u56e2\u961f\u5ba1\u6279\u4e2d")),_.default.createElement(o.default,{span:1,className:L.default.bor},_.default.createElement(d.default,{overlay:0===t?R(e):I(l),placement:"bottomLeft"},_.default.createElement(p.default,{component:J,style:{width:"100%"}})))))}),_.default.createElement(r.default,{style:{margin:"10px 0",display:"flex",alignItems:"center"}},_.default.createElement(o.default,{span:4,className:L.default.teamsTit,style:{marginBottom:"0"}},"\u6211\u7684\u56e2\u961f"),_.default.createElement(o.default,{span:20,style:{textAlign:"right"}},_.default.createElement(D,{style:{width:"500px"},placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0\u8fdb\u884c\u641c\u7d22",onSearch:this.handleSearchUserTeam}))),M&&_.default.createElement(r.default,{className:L.default.teamMinTit,type:"flex",align:"middle"},_.default.createElement(o.default,{span:6},"\u56e2\u961f\u540d\u79f0"),_.default.createElement(o.default,{span:3},"\u62e5\u6709\u4eba"),_.default.createElement(o.default,{span:3},"\u89d2\u8272"),_.default.createElement(o.default,{span:12},"\u96c6\u7fa4")),!M&&_.default.createElement(i.default,{description:"\u6682\u65e0\u56e2\u961f\uff0c\u8bf7\u70b9\u51fb\u521b\u5efa\u56e2\u961f\u8fdb\u884c\u521b\u5efa",image:i.default.PRESENTED_IMAGE_SIMPLE}),M&&M.map(e=>{var t=e.team_id,a=e.team_alias,l=e.team_name,s=e.region_list,n=e.owner_name,i=e.roles;return _.default.createElement(m.default,{key:t,style:{marginBottom:"10px"},hoverable:!0,bodyStyle:{padding:0}},_.default.createElement(r.default,{type:"flex",align:"middle",className:L.default.pl24},_.default.createElement(o.default,{span:6},a),_.default.createElement(o.default,{span:3},n),_.default.createElement(o.default,{span:3},i.map(e=>{return _.default.createElement("span",{style:{marginRight:"8px"},key:"role".concat(e)},k.default.actionMap(e))})),_.default.createElement(o.default,{span:11},this.showRegions(l,s)),_.default.createElement(o.default,{span:1,className:L.default.bor},_.default.createElement(d.default,{overlay:I(l),placement:"bottomLeft"},_.default.createElement(p.default,{component:J,style:{width:"100%"}})))))})),P="\u6211\u7684\u56e2\u961f",z="\u56e2\u961f\u662f\u4f01\u4e1a\u4e0b\u591a\u79df\u6237\u8d44\u6e90\u5212\u5206\u7684\u4e00\u4e2a\u5c42\u7ea7\uff0c\u5e73\u53f0\u4e2d\u5404\u7c7b\u8d44\u6e90\u90fd\u5c5e\u4e8e\u56e2\u961f";return f&&(P="\u56e2\u961f\u7ba1\u7406"),_.default.createElement(S.default,{title:P,content:z},y&&_.default.createElement(C.default,{onOk:this.handleCloseAllComponentInTeam,loading:w,title:"\u5173\u95ed\u56e2\u961f\u4e0b\u6240\u6709\u7ec4\u4ef6",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5173\u95ed\u56e2\u961f\u4e0b\u6240\u6709\u7ec4\u4ef6\u5417?",onCancel:this.hideCloseAllComponent}),this.state.joinTeam&&_.default.createElement(b.default,{enterpriseID:e,onOk:this.handleJoinTeam,onCancel:this.cancelJoinTeam}),this.state.showAddTeam&&_.default.createElement(x.default,{enterprise_id:e,loading:this.props.createTeamLoading,onOk:this.handleCreateTeam,onCancel:this.cancelCreateTeam}),this.state.showExitTeam&&_.default.createElement(C.default,{onOk:this.handleExitTeam,title:"\u9000\u51fa\u56e2\u961f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u9000\u51fa\u6b64\u56e2\u961f\u5417?",onCancel:this.hideExitTeam}),this.state.showDelApply&&_.default.createElement(C.default,{onOk:this.handleDelApply,title:"\u64a4\u9500\u7533\u8bf7",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u64a4\u9500\u6b64\u7533\u8bf7\u5417?",onCancel:this.hideDelApply}),this.state.showDelTeam&&_.default.createElement(C.default,{loading:E,onOk:this.handleDelTeam,title:"\u5220\u9664\u56e2\u961f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u56e2\u961f\u548c\u56e2\u961f\u4e0b\u7684\u6240\u6709\u8d44\u6e90\u5417\uff1f",onCancel:this.hideDelTeam}),s||c||T?_.default.createElement("div",{className:L.default.example},_.default.createElement(n.default,null)):_.default.createElement("div",null,f?j:B))}},T=E))||T);t.default=M},"kN/N":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABCklEQVQ4T52SMUsDQRCF34CQRvwdIkkTJHUKSeffuHcHKbSxs7Kz0UK4m/sbdiFFahEbg/g7xEYQRmbJyHqcRrLVsvO+nd15T7Djki6nqmMRmZjZtddE5MLMHkg+5dofoKrOAdwCGJJ8daGqHgJYAzgjeRfwN6iqM5KLKDRNc+T7sixf4izXJFBVRwAeSQ5CVNf11PdVVa0y8APAMcnnAM8BLP1gC+gNTkjeBPhOcj//fF/HzeuSNsA3kgf/BJM2gW3blma2ikn+Zq1PWESmRVE00XEMwL3a+ysPqvoJYOKe5nbMc5/6LnCfQ9MNwAzAfYw8twrAae5zX+TSyAFcbbpedq1KUdwx4/gCdzqBD4ZaGy8AAAAASUVORK5CYII="},pJo4:function(e,t,a){e.exports={teamsTit:"teamsTit___m8mMI",teamMinTit:"teamMinTit___1A85u",teamContent:"teamContent___Zj-8-",pl24:"pl24___1Bc0S",bor:"bor___EJfEN",example:"example___3JK2k",btns:"btns___33LqR",regionShow:"regionShow___JiDUn"}}}]);