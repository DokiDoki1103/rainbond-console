(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"5DSb":function(e,t,a){"use strict";var r=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("MXD1");var n,s,l,o=r(a("CFYs")),d=i(a("q1tI")),u=a("MuoO"),c=(n=(0,u.connect)(e=>{var t=e.global;return{apploadingnum:t.apploadingnum}},null,null,{pure:!1}),n((l=class extends d.Component{constructor(e){super(e),this.saveRef=(e=>{this.element=e}),this.width=0,this.timer=null,this.total=0,this.loaded=0,this.state={width:0,show:!1}}getCurrentWidth(){var e=100;return this.state.width+=.01*(e-this.state.width),this.state.width>90?90:this.state.width}componentWillReceiveProps(e){var t=this.props.apploadingnum,a=e.apploadingnum;t!==a&&(a>0?(this.start(),this.computedWidth()):0===a&&this.completed())}start(){this.timer||(this.setState({width:0,show:!0}),this.computedWidth(),this.timer=setInterval(()=>{this.computedWidth()},this.props.interval||800))}computedWidth(){var e=this.getCurrentWidth();this.setState({width:e})}addRequest(){this.timer?this.computedWidth():this.start()}removeRequest(){this.loaded++,this.total==this.loaded?this.completed():this.computedWidth()}completed(){this.total=this.loaded=0,this.setState({width:100},()=>{setTimeout(()=>{this.setState({show:!1},()=>{this.setState({width:0})})},500)}),clearInterval(this.timer),this.timer=null}render(){return d.default.createElement("div",{ref:this.saveRef,className:"loadingbar",style:{display:this.state.show?"block":"none",zIndex:9999999,height:"3px",position:"fixed",left:0,top:-10,width:"100%"}},d.default.createElement(o.default,{status:"active",size:"small",percent:this.state.width}))}},s=l))||s);t.default=c},W7L6:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuData=void 0;var i=r(a("q1tI")),n=r(a("p0pE")),s=a("+n12"),l=r(a("+iC2")),o=r(a("mWxT"));function d(e,t){var a=l.default.isCompanyAdmin(t),r=i.default.createElement("i",{className:"anticon"},i.default.createElement("svg",{t:"1584693382814",viewBox:"0 0 1024 1024",version:"1.1","p-id":"812",width:"20",height:"20"},i.default.createElement("path",{d:"M512 542.72L286.72 412.16V151.04L512 20.48l225.28 130.56v261.12L512 542.72zM339.2 381.44L512 481.28l172.8-99.84V181.76L512 81.92l-172.8 99.84v199.68zM776.96 1006.08L551.68 875.52V614.4l225.28-130.56L1002.24 614.4v261.12L776.96 1006.08zM602.88 844.8l172.8 99.84L949.76 844.8V645.12l-172.8-99.84-172.8 99.84V844.8zM247.04 1006.08L21.76 875.52V614.4l225.28-130.56L473.6 614.4v261.12L247.04 1006.08zM74.24 844.8l172.8 99.84L421.12 844.8V645.12l-172.8-99.84-174.08 99.84V844.8z",fill:"#9CA2A8","p-id":"813"}))),n=i.default.createElement("i",{className:"anticon"},i.default.createElement("svg",{t:"1585203404203",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18024",width:"20",height:"20"},i.default.createElement("path",{d:"M111.872 42.666667A26.538667 26.538667 0 0 0 85.333333 69.205333v885.589334c0 14.677333 11.861333 26.538667 26.538667 26.538666h800.256a26.538667 26.538667 0 0 0 26.538667-26.538666V69.205333A26.538667 26.538667 0 0 0 912.128 42.666667H111.872z m0-42.666667h800.256C950.357333 0 981.333333 30.976 981.333333 69.205333v885.589334c0 38.229333-30.976 69.205333-69.205333 69.205333H111.872A69.205333 69.205333 0 0 1 42.666667 954.794667V69.205333C42.666667 30.976 73.642667 0 111.872 0z",fill:"#4A4A4A","p-id":"18025"}),i.default.createElement("path",{d:"M661.333333 128a21.333333 21.333333 0 1 1 42.666667 0v160c0 65.706667-61.226667 117.333333-135.125333 117.333333H455.125333C381.226667 405.333333 320 353.706667 320 288V128a21.333333 21.333333 0 0 1 42.666667 0v160c0 40.362667 40.661333 74.666667 92.458666 74.666667h113.749334c51.797333 0 92.458667-34.304 92.458666-74.666667V128z",fill:"#4A4A4A","p-id":"18026"}))),s=i.default.createElement("i",{className:"anticon"},i.default.createElement("svg",{t:"1607308888685",viewBox:"0 0 1024 1024",version:"1.1","p-id":"5862",width:"20",height:"20"},i.default.createElement("path",{d:"M394.836769 987.615861H163.337688A113.950325 113.950325 0 0 1 46.188758 876.864142V110.798099A113.950325 113.950325 0 0 1 163.337688 0.04638h566.952844A113.950325 113.950325 0 0 1 845.840159 110.798099v338.652369a39.98257 39.98257 0 0 1-77.966011 0V110.798099a39.98257 39.98257 0 0 0-39.98257-36.783965H163.337688a39.98257 39.98257 0 0 0-39.98257 36.783965v766.066043a39.98257 39.98257 0 0 0 39.98257 37.18379h231.499081a36.783964 36.783964 0 1 1 0 73.567929z",fill:"#9ca298","p-id":"5863"}),i.default.createElement("path",{d:"M632.333235 285.921756H262.494462a36.783964 36.783964 0 1 1 0-73.567929h369.838773a36.783964 36.783964 0 1 1 0 73.567929zM632.333235 473.44001H262.494462a36.783964 36.783964 0 1 1 0-73.567929h369.838773a36.783964 36.783964 0 1 1 0 73.567929zM976.982989 746.520964c0-21.190762-13.9939-31.986056-37.18379-33.985185a47.979084 47.979084 0 0 1-47.179433-58.774378c8.796165-39.98257 6.797037-45.58013-30.786578-66.371066l-23.989543-13.194249a51.17769 51.17769 0 0 0-71.5688 5.997386c-27.587973 21.590588-39.98257 21.190762-66.371066 0a51.17769 51.17769 0 0 0-71.568801-6.797037l-39.98257 21.990414a37.583616 37.583616 0 0 0-19.591459 47.579258c12.394597 39.98257-5.59756 65.571415-48.778736 69.969498-17.992157 1.999129-29.986928 11.594945-30.786579 27.587973a749.673189 749.673189 0 0 0 0 94.758691c0 20.391111 13.594074 30.786579 35.984313 32.785708a49.178561 49.178561 0 0 1 48.778736 57.574901c-7.996514 41.981699-7.996514 46.379781 31.986056 67.970369 8.39634 4.797908 16.792679 9.995643 25.588845 14.393725a48.778736 48.778736 0 0 0 64.371938-8.39634c30.786579-26.388496 39.98257-25.988671 72.368451 0a388.230756 388.230756 0 0 0 39.982571 23.189891c29.187276-18.391982 57.974727-34.38501 83.963397-53.576644a35.584487 35.584487 0 0 0 3.598431-31.58623c-14.793551-35.984313 8.796165-67.570543 50.378038-71.568801 17.192505 0 28.78745-10.795294 29.587102-25.98867a831.237632 831.237632 0 0 0 1.199477-93.559214z m-245.093154 139.139343a96.357994 96.357994 0 1 1 96.357994-96.357993 95.958168 95.958168 0 0 1-96.357994 96.357993z",fill:"#9ca298","p-id":"5864"}),i.default.createElement("path",{d:"M223.311543 587.390335l260.286531 0 0 73.967754-260.286531 0 0-73.967754Z",fill:"#9ca298","p-id":"5865"}))),d=[{name:"\u603b\u89c8",icon:"dashboard",path:"/enterprise/".concat(e,"/index"),authority:["admin","user"]},{name:"\u5e94\u7528\u5e02\u573a",icon:"share-alt",path:"/enterprise/".concat(e,"/shared"),authority:["admin","user"]}];return o.default.isEnableBillingFunction()&&d.push({name:"\u8ba2\u8d2d",icon:n,path:"/enterprise/".concat(e,"/orders/overviewService"),authority:["admin","user"]}),d.push({name:"\u56e2\u961f",icon:"team",path:"/enterprise/".concat(e,"/teams"),authority:["admin","user"]}),a&&d.push({name:"\u96c6\u7fa4",icon:r,path:"/enterprise/".concat(e,"/clusters"),authority:["admin","user"]},{name:"\u7528\u6237",icon:"user",path:"/enterprise/".concat(e,"/users"),authority:["admin","user"]},{name:"\u8bbe\u7f6e",icon:"setting",path:"/enterprise/".concat(e,"/setting"),authority:["admin","user"]},{name:"\u65e5\u5fd7",icon:s,path:"/enterprise/".concat(e,"/logs"),authority:["admin","user"]}),d}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return e.map(e=>{var r=e.path;(0,s.isUrl)(r)||(r=t+e.path);var i=(0,n.default)({},e,{path:r,authority:e.authority||a});return e.children&&(i.children=u(e.children,"".concat(t).concat(e.path,"/"),e.authority)),i})}var c=(e,t)=>{var a=u(d(e,t));return a};t.getMenuData=c},uHcJ:function(e,t,a){"use strict";var r=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5Dmo");var n=i(a("3S7+"));a("B9cy");var s,l=i(a("Ol7k")),o=i(a("TSYQ")),d=a("MuoO"),u=a("7DNP"),c=a("4zCG"),h=i(a("XaGS")),p=i(a("Wwog")),m=i(a("bALw")),f=i(a("17x9")),v=a("s4NR"),g=r(a("q1tI")),b=a("E6Dt"),y=i(a("ZFw/")),E=i(a("W2Kv")),w=a("W7L6"),M=i(a("/VoG")),C=i(a("NtFa")),x=i(a("h3zL")),L=i(a("CmFy")),S=i(a("5DSb")),A=i(a("xqX8")),I=i(a("AgvA")),W=i(a("IamK")),N=i(a("HZnN")),z=i(a("QDog")),_=i(a("mWxT")),V=i(a("+iC2")),R=i(a("R1Dz")),T=l.default.Content,D=(0,p.default)(e=>{var t={},a=e=>{e.forEach(e=>{e.children&&a(e.children),t[e.path]=e})};return a(e),t},h.default),k={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}};(0,c.enquireScreen)(e=>{s=e});class H extends g.PureComponent{constructor(e){super(e),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"global/fetchEnterpriseList",callback:e=>{e&&200===e._code&&this.setState({enterpriseList:e.list,ready:!0},()=>{this.redirectEnterpriseView(),this.load()})}})}),this.loadClusters=(e=>{var t=this.props,a=t.dispatch,r=t.currentUser;a({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:e,check_status:"no"},callback:t=>{var i=V.default.isCompanyAdmin(r);t&&t.list&&0==t.list.length&&i&&a(u.routerRedux.push("/enterprise/".concat(e,"/addCluster?init=true")))}})}),this.load=(()=>{(0,c.enquireScreen)(e=>{this.setState({isMobile:e})})}),this.getChildContext=(()=>{var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}),this.matchParamsPath=(e=>{var t=Object.keys(this.breadcrumbNameMap).find(t=>{return(0,m.default)(t).test(e)});return this.breadcrumbNameMap[t]}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.redirectEnterpriseView=(()=>{var e=this.props,t=e.dispatch,a=e.currentUser,r=e.rainbondInfo,i=e.match.params.eid,n=this.state.enterpriseList;if(i&&"auto"!==i)n.map(e=>{return e.enterprise_id===i&&(this.fetchEnterpriseInfo(i),z.default.putLog(Object.assign(r,e)),this.setState({enterpriseInfo:e})),e});else if(n.length>0){var s=null;n.map(e=>{return e.enterprise_id===a.enterprise_id&&(s=e),e}),null==s&&(s=n[0]),z.default.putLog(Object.assign(r,s)),this.fetchEnterpriseInfo(s.enterprise_id),this.setState({enterpriseInfo:s}),t(u.routerRedux.replace("/enterprise/".concat(s.enterprise_id,"/index")))}else t(u.routerRedux.push("/user/login"))}),this.fetchEnterpriseInfo=(e=>{if(!e)return null;var t=this.props.dispatch;this.fetchEnterpriseService(e),this.loadClusters(e),t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:e}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.breadcrumbNameMap=D((0,w.getMenuData)(this.props.groups)),this.state={isMobile:s,isInit:!1,showWelcomeCreateTeam:!1,canCancelOpenRegion:!0,enterpriseList:[],enterpriseInfo:!1,ready:!1}}componentDidMount(){this.getEnterpriseList()}getContext(){var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}render(){var e=this.props,t=e.currentUser,a=e.collapsed,r=e.location,i=e.location.pathname,s=e.match.params.eid,d=e.orders,c=e.children,h=e.rainbondInfo,p=e.enterprise,m=e.showAuthCompany,f=e.enterpriseServiceInfo,V=this.state,D=V.enterpriseList,H=V.enterpriseInfo,O=V.ready,P=a?"calc(100% - 416px)":"calc(100% - 116px)",q=_.default.isEnableBillingFunction(),U=(0,v.stringify)({redirect:window.location.href});if(!O||!H)return g.default.createElement(A.default,null);if(!t||!h||0===D.length)return g.default.createElement(u.Redirect,{to:"/user/login?".concat(U)});var j=_.default.fetchLogo(h,p)||E.default,F=()=>{return g.default.createElement("div",{className:x.default.enterprise},q&&g.default.createElement(n.default,{title:f&&"vip"===f.type?"\u5c0a\u8d35\u7684\u4ed8\u8d39\u4f01\u4e1a\u7528\u6237":"\u514d\u8d39\u7528\u6237"},z.default.fetchSvg(f&&f.type)),p&&p.enterprise_alias||H&&H.enterprise_alias)},B=()=>{return g.default.createElement(l.default,null,g.default.createElement(W.default,{currentEnterprise:H,enterpriseList:D,currentUser:t,logo:j,Authorized:N.default,collapsed:a,location:r,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse}),g.default.createElement(l.default,null,g.default.createElement(C.default,{eid:s,logo:j,isPubCloud:h&&h.is_public&&h.is_public.enable,currentUser:t,collapsed:a,onCollapse:this.handleMenuCollapse,isMobile:this.state.isMobile,customHeader:F}),g.default.createElement(l.default,{style:{flexDirection:"row"}},g.default.createElement(L.default,{currentEnterprise:H,enterpriseList:D,title:h&&h.title&&h.title.enable&&h.title.value,currentUser:t,Authorized:N.default,menuData:(0,w.getMenuData)(s,t),showMenu:!0,pathname:i,location:r,isMobile:this.state.isMobile,collapsed:a,onCollapse:this.handleMenuCollapse}),g.default.createElement(T,{key:s,style:{height:"calc(100vh - 64px)",overflow:"auto",width:P}},g.default.createElement("div",{style:{margin:"24px 24px 0"}},g.default.createElement(N.default,{logined:!0,authority:["admin","user"],noMatch:g.default.createElement(u.Redirect,{to:"/user/login"})},c))))))},X=_.default.fetchSiteTitle(h);return g.default.createElement(g.Fragment,null,g.default.createElement(y.default,{title:X},g.default.createElement(b.ContainerQuery,{query:k},e=>g.default.createElement(R.default.Provider,{value:this.getContext()},g.default.createElement("div",{className:(0,o.default)(e)},B())))),g.default.createElement(S.default,null),m&&g.default.createElement(M.default,{eid:s,marketName:m,currStep:0}),d&&q&&g.default.createElement(I.default,{enterpriseServiceInfo:f,eid:s,orders:d}))}}H.childContextTypes={location:f.default.object,breadcrumbNameMap:f.default.object,currRegion:f.default.string,currTeam:f.default.string};var O=(0,d.connect)(e=>{var t=e.user,a=e.global,r=e.index,i=e.loading,n=e.order;return{currentUser:t.currentUser,notifyCount:t.notifyCount,collapsed:a.collapsed,groups:a.groups,fetchingNotices:i.effects["global/fetchNotices"],notices:a.notices,currTeam:z.default.getCurrTeamName(),currRegion:z.default.getCurrRegionName(),rainbondInfo:a.rainbondInfo,payTip:a.payTip,memoryTip:a.memoryTip,noMoneyTip:a.noMoneyTip,showAuthCompany:a.showAuthCompany,orders:a.orders,overviewInfo:r.overviewInfo,nouse:a.nouse,enterprise:a.enterprise,enterpriseServiceInfo:n.enterpriseServiceInfo}})(H);t.default=O}}]);