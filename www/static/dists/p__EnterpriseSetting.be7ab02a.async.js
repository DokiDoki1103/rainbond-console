(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"+XgA":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),s=l(a("jehZ"));a("5NDa");var r=l(a("5rEg"));a("y8nQ");var d,o,u,c,f=l(a("Vl3Y")),m=n(a("q1tI")),h=a("MuoO"),p=l(a("e6Ls")),g=(l(a("nyIC")),l(a("8+Sn"))),b=l(a("PCLb")),v=f.default.Item,E=(d=f.default.create(),o=(0,h.connect)(e=>{var t=e.loading;return{basicInformationLoading:t.effects["global/putBasicInformation"]}}),d(u=o((c=class extends m.PureComponent{constructor(){super(...arguments),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.onOk;a.validateFields({force:!0},(e,t)=>{if(!e&&l){if(t.logo.fileList&&t.logo.fileList.length>0){var a=this.handleFileUrl(t.logo.fileList[0]);a&&(t.logo=a)}if(t.favicon.fileList&&t.favicon.fileList.length>0){var n=this.handleFileUrl(t.favicon.fileList[0]);n&&(t.favicon=n)}l(t)}})}),this.handleFileUrl=(e=>{return e.response&&200===e.response.code&&e.response.data.bean&&e.response.data.bean.file_url})}render(){var e=this.props,t=e.title,a=e.onCancel,l=e.form,n=e.loading,d=void 0!==n&&n,o=e.basicInformationLoading,u=e.data,c=void 0===u?{}:u,h=l.getFieldDecorator,E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},C=g.default.get("token"),y={};C&&(y.Authorization="GRJWT ".concat(C));var _={formItemLayout:E,form:l,data:c};return m.default.createElement(i.default,{visible:!0,title:t,confirmLoading:d||o,className:p.default.TelescopicModal,onCancel:a,onOk:this.onOk},m.default.createElement(f.default,{onSubmit:this.onOk},m.default.createElement(v,(0,s.default)({},E,{label:"\u7f51\u7ad9\u6807\u9898"}),h("title",{initialValue:c.title||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"},{max:64,message:"\u6700\u5927\u957f\u5ea664\u4f4d"}]})(m.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),m.default.createElement(v,(0,s.default)({},E,{label:"\u4f01\u4e1a\u540d\u79f0"}),h("enterprise_alias",{initialValue:c.enterprise_alias||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0"},{max:64,message:"\u6700\u5927\u957f\u5ea664\u4f4d"}]})(m.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0"}))),m.default.createElement(b.default,(0,s.default)({},_,{name:"logo",label:"LOGO",extra:"\u8bf7\u4e0a\u4f20236 \u2716\ufe0f 35\u7684\u56fe\u7247",initialValue:c.logo,required:!1,uploadBtnStyle:{width:"236px",height:"35px"},imgstyle:{width:"236px",height:"35px"}})),m.default.createElement(b.default,(0,s.default)({},_,{name:"favicon",label:"\u7f51\u9875\u56fe\u6807",extra:"\u8bf7\u4e0a\u4f2033 \u2716\ufe0f 33\u7684\u56fe\u7247",initialValue:c.favicon,required:!1,uploadBtnStyle:{width:"33px",height:"33px"},imgstyle:{width:"33px",height:"33px"}}))))}},u=c))||u)||u);t.default=E},"16D0":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Znn+");var i,s,r,d=l(a("ZTPi")),o=a("MuoO"),u=a("7DNP"),c=n(a("q1tI")),f=l(a("XZXw")),m=l(a("+iC2")),h=l(a("zmPw")),p=l(a("19Ab")),g=d.default.TabPane,b=(i=(0,o.connect)(e=>{var t=e.user,a=e.list,l=e.loading,n=e.global,i=e.index;return{user:t.currentUser,list:a,loading:l.models.list,rainbondInfo:n.rainbondInfo,enterprise:n.enterprise,isRegist:n.isRegist,oauthLongin:l.effects["global/creatOauth"],certificateLongin:l.effects["global/putCertificateType"],overviewInfo:i.overviewInfo}}),i((r=class extends c.PureComponent{constructor(e){super(e),this.onChange=(e=>{this.setState({activeKey:e})});var t=this.props.user,a=m.default.isCompanyAdmin(t);this.state={adminer:a,activeKey:"infrastructure"}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(u.routerRedux.push("/"))}render(){var e=this.state,t=e.adminer,a=e.activeKey;return c.default.createElement(f.default,{title:"\u4f01\u4e1a\u8bbe\u7f6e",content:"\u652f\u6301\u7528\u6237\u6ce8\u518c\u3001Oauth2.0\u96c6\u6210\u7b49\u4f01\u4e1a\u8bbe\u7f6e\u529f\u80fd\uff0c\u66f4\u4e30\u5bcc\u7684\u4f01\u4e1a\u7ba1\u7406\u8d44\u6e90\u7ba1\u7406\u529f\u80fd\u5728\u4f01\u4e1a\u8d44\u6e90\u7ba1\u7406\u5e73\u53f0\u63d0\u4f9b"},c.default.createElement(d.default,{onChange:this.onChange,activeKey:a},c.default.createElement(g,{tab:c.default.createElement("div",null,"\u57fa\u7840\u8bbe\u7f6e"),key:"infrastructure"},c.default.createElement(h.default,this.props)),t&&c.default.createElement(g,{tab:c.default.createElement("div",null,"\u4f01\u4e1a\u7ba1\u7406\u5458\u7ba1\u7406"),key:"management"},c.default.createElement(p.default,this.props))))}},s=r))||s);t.default=b},"19Ab":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=l(a("W9HT"));a("R9oj");var s=l(a("ECub"));a("IzEo");var r=l(a("bx4M"));a("qVdP");var d=l(a("jsC+"));a("Pwec");var o=l(a("CtXQ"));a("14J3");var u=l(a("BMrR"));a("jCWc");var c=l(a("kPKH"));a("+L6B");var f=l(a("2/Rp"));a("lUTK");var m=l(a("BvKs"));a("/xke");var h,p,g,b=l(a("TeRw")),v=l(a("p0pE")),E=n(a("q1tI")),C=a("MuoO"),y=l(a("hEzB")),_=l(a("q76B")),O=l(a("hMqj")),I=l(a("+iC2")),k=l(a("RsBk")),x=(h=(0,C.connect)(e=>{var t=e.user,a=e.loading,l=e.global;return{user:t.currentUser,loading:a.models.list,rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,oauthLongin:a.effects["global/creatOauth"]}}),h((g=class extends E.PureComponent{constructor(e){super(e),this.onAddAdmin=(()=>{this.setState({showAddAdmin:!0})}),this.getEnterpriseAdmins=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchEnterpriseAdmin",payload:{enterprise_id:a},callback:e=>{e&&200===e._code&&this.setState({adminList:e.list,enterpriseAdminLoading:!1})}})}),this.handleEdit=(e=>{this.setState({showAddAdmin:!0,info:e})}),this.handleCreateAdmin=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid,n=this.state.info;a(n?{type:"global/editEnterpriseAdminTeams",payload:(0,v.default)({enterprise_id:l},e),callback:()=>{b.default.success({message:"\u7f16\u8f91\u6210\u529f"}),this.getEnterpriseAdmins(),this.cancelCreateAdmin()}}:{type:"global/addEnterpriseAdminTeams",payload:(0,v.default)({enterprise_id:l},e),callback:()=>{b.default.success({message:"\u6dfb\u52a0\u6210\u529f"}),this.getEnterpriseAdmins(),this.cancelCreateAdmin()}})}),this.cancelCreateAdmin=(()=>{this.setState({showAddAdmin:!1,info:!1})}),this.showDelTeam=(e=>{this.setState({showDelTeam:!0,exitAdminNameID:e})}),this.hideDelAdmin=(()=>{this.setState({showDelTeam:!1})}),this.handleDelAdmin=(()=>{var e=this.state.exitAdminNameID;this.props.dispatch({type:"global/deleteEnterpriseAdmin",payload:{user_id:e},callback:()=>{b.default.success({message:"\u5220\u9664\u6210\u529f"}),this.getEnterpriseAdmins(),this.hideDelAdmin()}})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:a}}),t({type:"user/fetchCurrent"})});var t=this.props.user,a=I.default.isCompanyAdmin(t);this.state={adminer:a,adminList:[],showAddAdmin:!1,exitAdminNameID:"",enterpriseAdminLoading:!1,showDelTeam:!1,info:!1}}componentWillMount(){this.fetchEnterpriseInfo(),this.getEnterpriseAdmins()}render(){var e=this.props,t=e.match.params.eid,a=e.user,l=this.state,n=l.adminList,h=l.enterpriseAdminLoading,p=l.showAddAdmin,g=l.showDelTeam,b=l.info,v=l.adminer,C=a&&a.user_id,I=n&&n.length>0&&n,x=()=>E.default.createElement("svg",{t:"1581212425061",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1314",width:"32",height:"32"},E.default.createElement("path",{d:"M512 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1315",fill:"#999999"}),E.default.createElement("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1316",fill:"#999999"}),E.default.createElement("path",{d:"M512 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1317",fill:"#999999"})),S=e=>{return E.default.createElement(m.default,null,E.default.createElement(m.default.Item,null,E.default.createElement("a",{href:"javascript:;",onClick:()=>{this.showDelTeam(e.user_id)}},"\u5220\u9664\u7ba1\u7406\u5458")),E.default.createElement(m.default.Item,null,E.default.createElement("a",{href:"javascript:;",onClick:()=>{this.handleEdit(e)}},"\u7f16\u8f91\u7ba1\u7406\u5458")))},A=E.default.createElement(c.default,{span:4,offset:20,style:{textAlign:"right"}},E.default.createElement(f.default,{type:"primary",onClick:this.onAddAdmin,className:k.default.btns},"\u6dfb\u52a0\u7ba1\u7406\u5458")),w=E.default.createElement("div",{style:{marginTop:"20px"}},E.default.createElement(u.default,null,v&&A),I&&E.default.createElement(u.default,{className:k.default.teamMinTit,type:"flex",align:"middle",style:{padding:" 0 0 10px 24px"}},E.default.createElement(c.default,{span:5},"\u540d\u79f0"),E.default.createElement(c.default,{span:5},"\u59d3\u540d"),E.default.createElement(c.default,{span:6},"\u89d2\u8272"),E.default.createElement(c.default,{span:5},"\u65f6\u95f4")),I?I.map(e=>{var t=e.user_id,a=e.create_time,l=e.nick_name,n=e.real_name,i=e.roles;return E.default.createElement(r.default,{key:t,style:{marginBottom:"10px"},bodyStyle:{padding:0},hoverable:!0},E.default.createElement(u.default,{type:"flex",align:"middle",style:{paddingLeft:"24px",height:"70px"}},E.default.createElement(c.default,{span:5},l),E.default.createElement(c.default,{span:5},n),E.default.createElement(c.default,{span:6},i.map(e=>{return E.default.createElement("span",{style:{marginRight:"5px"}},O.default.roleMap(e))})),E.default.createElement(c.default,{span:5},a),E.default.createElement(c.default,{span:2}),E.default.createElement(c.default,{span:1,className:k.default.bor},E.default.createElement(d.default,{disabled:C==t,overlay:S(e),placement:"bottomLeft"},E.default.createElement(o.default,{component:x,style:{width:"100%"}})))))}):E.default.createElement(s.default,{image:s.default.PRESENTED_IMAGE_SIMPLE}));return E.default.createElement(E.Fragment,null,p&&E.default.createElement(y.default,{eid:t,info:b,onOk:this.handleCreateAdmin,onCancel:this.cancelCreateAdmin}),g&&E.default.createElement(_.default,{onOk:this.handleDelAdmin,title:"\u5220\u9664\u7ba1\u7406\u5458",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7ba1\u7406\u5458\u5417\uff1f",onCancel:this.hideDelAdmin}),h?E.default.createElement("div",{className:k.default.example},E.default.createElement(i.default,null)):w)}},p=g))||p);t.default=x},"6ryS":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("y8nQ");var s,r,d,o,u=l(a("Vl3Y")),c=n(a("q1tI")),f=a("MuoO"),m=l(a("ZNrE")),h=l(a("mWxT")),p=l(a("e6Ls")),g=(s=(0,f.connect)(e=>{var t=e.global;return{enterprise:t.enterprise}}),r=u.default.create(),s(d=r((o=class extends c.PureComponent{constructor(){super(...arguments),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk,l=t.validateFields;l((e,t)=>{!e&&a&&a(t)})}),this.checkConfigFile=((e,t,a)=>{if(t){if(t.fileList.length>0){var l=t.fileList.splice(-1);return this.readFileContents(l,"auto_ssl_config"),void a()}}else a()}),this.readFileContents=((e,t)=>{var a=new FileReader;a.onload=(e=>{this.props.form.setFieldsValue({[t]:e.target.result})}),a.readAsText(e[0].originFileObj,"UTF-8")})}render(){var e=this.props,t=e.form,a=e.onCancel,l=e.enterprise,n=e.loading,s=e.AutomaticCertificate,r=h.default.CertificateIssuedByValue(l),d=t.getFieldDecorator,o=t.setFieldsValue,f={labelCol:{xs:{span:24}},wrapperCol:{xs:{span:24}}};return c.default.createElement(i.default,{visible:!0,confirmLoading:n,title:s?"\u81ea\u52a8\u7b7e\u53d1\u8bc1\u4e66":"\u5f00\u901a\u81ea\u52a8\u7b7e\u53d1\u8bc1\u4e66",className:p.default.TelescopicModal,onOk:this.handleSubmit,width:800,onCancel:a},c.default.createElement(u.default,{labelAlign:"left",onSubmit:this.handleSubmit},c.default.createElement(m.default,{setFieldsValue:o,formItemLayout:f,Form:u.default,getFieldDecorator:d,name:"auto_ssl_config",label:"\u6269\u5c55\u914d\u7f6e",message:"\u6269\u5c55\u914d\u7f6e\u662f\u5fc5\u987b\u7684",width:"752px",data:r||""})))}},d=o))||d)||d);t.default=g},AqsJ:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=l(a("wCAj"));a("14J3");var s=l(a("BMrR"));a("jCWc");var r=l(a("kPKH"));a("fOrg");var d=l(a("+KLJ"));a("+L6B");var o=l(a("2/Rp"));a("/xke");var u=l(a("TeRw"));a("5Dmo");var c=l(a("3S7+"));a("2qtc");var f,m,h,p=l(a("kLXV")),g=a("MuoO"),b=n(a("q1tI")),v=l(a("q76B")),E=l(a("e6Ls")),C=l(a("t9D+")),y=p.default.confirm,_=(f=(0,g.connect)(e=>{var t=e.loading,a=e.global,l=e.index;return{rainbondInfo:a.rainbondInfo,enterprise:a.enterprise,isRegist:a.isRegist,oauthLongin:t.effects["global/creatOauth"],overviewInfo:l.overviewInfo}}),f((h=class extends b.PureComponent{constructor(e){var t;super(e),t=this,this.handleSubmit=(()=>{var e=this.props.onOk;e&&e()}),this.handleDiv=(e=>{return b.default.createElement(c.default,{title:e},b.default.createElement("span",{style:{wordBreak:"break-all",wordWrap:"break-word"}},e))}),this.handleDel=(e=>{var t=this;y({title:"\u5220\u9664\u914d\u7f6e\u540e\u5df2\u7ed1\u5b9a\u7684\u7528\u6237\u6570\u636e\u5c06\u6e05\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u914d\u7f6e\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk(){t.handleDeleteOauth(e)}})}),this.handleDeleteOauth=(e=>{var t=this.props.dispatch;t({type:"global/deleteOauthInfo",payload:{service_id:e.service_id},callback:e=>{e&&200===e._code&&(u.default.success({message:"\u5220\u9664\u6210\u529f"}),this.handelOauthInfo())}})}),this.handleCreatOauth=(e=>{var t=e.name,a=e.client_id,l=e.client_secret,n=e.oauth_type,i=e.home_url,s=e.redirect_domain,r=e.is_auto_login;n=n.toLowerCase(),"github"===n&&(i="https://github.com");var d={name:t,client_id:a,client_secret:l,is_auto_login:r,oauth_type:n,redirect_uri:"".concat(s,"/console/oauth/redirect"),home_url:i,is_console:!0};this.handelRequest(d)}),this.handelRequest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,l=t.props,n=l.dispatch,i=l.eid,s=t.state,r=s.oauthInfo,d=s.oauthTable,o=s.isOpen,c=[...d];e.eid=i,e.service_id=r?r.service_id:null,e.enable=!a,d&&d.length>0&&d.map((t,a)=>{var l=t.service_id;c[a].is_console=!0,r&&l===e.service_id&&(c[a]=Object.assign(c[a],e))}),!r&&c.push(e),n({type:"global/creatOauth",payload:{enterprise_id:i,arr:c},callback:e=>{e&&200===e._code&&(u.default.success({message:o?"\u5f00\u542f\u6210\u529f":a?"\u5173\u95ed\u6210\u529f":r?"\u7f16\u8f91\u6210\u529f":"\u6dfb\u52a0\u6210\u529f"}),t.handelOauthInfo())}})},this.handleOpen=((e,t)=>{this.setState({openOauth:!0,oauthInfo:e,isOpen:t})}),this.handleOpenDomain=(e=>{this.setState({oauthInfo:e,showDeleteDomain:!0})}),this.handelClone=(()=>{this.setState({isOpen:!1,openOauth:!1,oauthInfo:!1,showDeleteDomain:!1})}),this.handelOauthInfo=(()=>{var e=this.props,t=e.dispatch,a=e.eid;t({type:"global/getOauthInfo",payload:{enterprise_id:a},callback:e=>{if(e&&200==e._code){var t=e.list&&e.list.length>0&&e.list;this.setState({loading:!1,oauthTable:t||[]}),this.handelClone()}}})}),this.state={loading:!0,oauthInfo:!1,oauthTable:[],openOauth:!1,isOpen:!1,showDeleteDomain:!1}}componentDidMount(){this.handelOauthInfo()}render(){var e=this.props,t=e.onCancel,a=e.oauthLongin,l=this.state,n=l.oauthTable,u=l.loading,c=l.openOauth,f=l.oauthInfo,m=l.showDeleteDomain,h=null;return n.map(e=>{return e.is_auto_login?(h=e,e):null}),b.default.createElement(p.default,{title:"OAuth\u670d\u52a1\u914d\u7f6e",loading:u,className:E.default.TelescopicModal,width:1150,visible:!0,onOk:this.handleSubmit,onCancel:t,footer:[b.default.createElement(o.default,{style:{marginTop:"20px"},onClick:this.handleSubmit},"\u5173\u95ed")]},b.default.createElement("div",null,m&&b.default.createElement(v.default,{loading:a,title:"\u5173\u95ed",desc:"\u786e\u5b9a\u8981\u5173\u95ed\u6b64\u914d\u7f6e\u5417\uff1f",onOk:()=>{this.handelRequest(f,"clone")},onCancel:this.handelClone}),c&&b.default.createElement(C.default,{loading:a,oauthInfo:f,onOk:this.handleCreatOauth,onCancel:this.handelClone}),b.default.createElement(s.default,{gutter:12},b.default.createElement(r.default,{span:12},h&&b.default.createElement(d.default,{message:"".concat(h.name," \u670d\u52a1\u5df2\u5f00\u542f\u81ea\u52a8\u767b\u5f55\uff0c\u767b\u5f55\u6d41\u7a0b\u5c06\u81ea\u52a8\u5bfc\u822a\u5230\u8be5\u670d\u52a1\u3002"),type:"success"})),b.default.createElement(r.default,{span:12,style:{textAlign:"right",marginBottom:"10px"}},b.default.createElement(o.default,{onClick:()=>{this.handleOpen(!1)},type:"primary",icon:"plus"},"\u6dfb\u52a0"))),b.default.createElement(i.default,{dataSource:n,style:{width:"100%",overflowX:"auto"},columns:[{title:"OAuth\u7c7b\u578b",dataIndex:"oauth_type",key:"1",width:"10%"},{title:"\u540d\u79f0",dataIndex:"name",key:"2",width:"15%"},{title:"\u5ba2\u6237\u7aefID",dataIndex:"client_id",key:"3",width:"15%",render:e=>this.handleDiv(e)},{title:"\u5ba2\u6237\u7aef\u5bc6\u94a5",dataIndex:"client_secret",key:"4",width:"15%",render:e=>this.handleDiv(e)},{title:"\u670d\u52a1\u5730\u5740",dataIndex:"home_url",key:"5",width:"15%",render:e=>this.handleDiv(e)},{title:"\u64cd\u4f5c",dataIndex:"action",width:"15%",key:"action",align:"center",render:(e,t)=>b.default.createElement("div",null,b.default.createElement("a",{style:{marginRight:"10px"},onClick:()=>{this.handleDel(t)}},"\u5220\u9664"),b.default.createElement("a",{style:{marginRight:"10px"},onClick:()=>{this.handleOpen(t)}},"\u7f16\u8f91"),b.default.createElement("a",{onClick:()=>{t.enable?this.handleOpenDomain(t):this.handleOpen(t,!0)}},t.enable?"\u5173\u95ed":"\u5f00\u542f"))}]})))}},m=h))||m);t.default=_},Bq0W:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),s=l(a("jehZ"));a("5NDa");var r=l(a("5rEg"));a("y8nQ");var d,o,u,c=l(a("Vl3Y")),f=n(a("q1tI")),m=l(a("e6Ls")),h=(c.default.Item,d=c.default.create(),d((u=class extends f.PureComponent{constructor(){super(...arguments),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,l=t.form;l.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})})}render(){var e=this.props,t=e.title,a=e.onCancel,l=e.data,n=void 0===l?{}:l,d=e.form,o=e.loading,u=void 0!==o&&o,h=d.getFieldDecorator,p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return f.default.createElement(i.default,{title:t,confirmLoading:u,visible:!0,className:m.default.TelescopicModal,onCancel:a,onOk:this.onOk},f.default.createElement(c.default,{onSubmit:this.onOk},f.default.createElement(c.default.Item,(0,s.default)({},p,{label:"\u4ed3\u5e93\u5730\u5740"}),f.default.createElement(r.default.Group,{compact:!0},h("hub_url",{initialValue:n.hub_url||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ed3\u5e93\u5730\u5740"}]})(f.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u4ed3\u5e93\u5730\u5740"})))),f.default.createElement(c.default.Item,(0,s.default)({},p,{label:"\u547d\u540d\u7a7a\u95f4"}),h("namespace",{initialValue:n.namespace||"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u547d\u540d\u7a7a\u95f4"},{pattern:/^[a-zA-Z][\da-zA-Z]*$/,message:"\u53ea\u80fd\u662f\u6570\u5b57\u548c\u5b57\u6bcd \u5e76\u4e14\u5b57\u6bcd\u5f00\u5934"}]})(f.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u547d\u540d\u7a7a\u95f4"}))),f.default.createElement(c.default.Item,(0,s.default)({},p,{label:"\u7528\u6237\u540d"}),h("hub_user",{initialValue:n.hub_user||"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(f.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),f.default.createElement(c.default.Item,(0,s.default)({},p,{label:"\u5bc6\u7801"}),h("hub_password",{initialValue:n.hub_password||"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(f.default.createElement(r.default,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))))}},o=u))||o);t.default=h},HzM2:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("5NDa");var s=l(a("5rEg")),r=l(a("jehZ"));a("OaEy");var d=l(a("2fM7"));a("y8nQ");var o,u,c,f=l(a("Vl3Y")),m=n(a("q1tI")),h=l(a("e6Ls")),p=f.default.Item,g=(o=f.default.create(),o((c=class extends m.PureComponent{constructor(){super(...arguments),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,l=t.form;l.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})})}render(){var e=this.props,t=e.title,a=e.onCancel,l=e.data,n=void 0===l?{}:l,o=e.form,u=e.providers,c=e.loading,g=void 0!==c&&c,b=o.getFieldDecorator,v={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return m.default.createElement(i.default,{title:t,confirmLoading:g,visible:!0,className:h.default.TelescopicModal,onCancel:a,onOk:this.onOk},m.default.createElement(f.default,{onSubmit:this.onOk},m.default.createElement(p,(0,r.default)({},v,{label:"\u5b58\u50a8\u7c7b\u578b"}),b("provider",{initialValue:n.provider||"",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a!"}]})(m.default.createElement(d.default,null,u.map(e=>{return m.default.createElement(Option,{key:e.key,value:e.key},e.name)})))),m.default.createElement(f.default.Item,(0,r.default)({},v,{label:"endpoint"}),b("endpoint",{initialValue:n.endpoint||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165endpoint"}]})(m.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165endpoint"}))),m.default.createElement(f.default.Item,(0,r.default)({},v,{label:"bucket_name"}),b("bucket_name",{initialValue:n.bucket_name||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165bucket_name"}]})(m.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165bucket_name"}))),m.default.createElement(f.default.Item,(0,r.default)({},v,{name:"access_key",label:"Access Key"}),b("access_key",{initialValue:n.access_key||"",rules:[{required:!0,message:"\u8bf7\u63d0\u4f9b\u5177\u6709\u8db3\u591f\u6743\u9650\u7684Access Key"}]})(m.default.createElement(s.default,{placeholder:"Access Key"}))),m.default.createElement(f.default.Item,(0,r.default)({},v,{name:"secret_key",label:"Secret Key"}),b("secret_key",{initialValue:n.secret_key||"",rules:[{required:!0,message:"\u8bf7\u63d0\u4f9b\u5177\u6709\u8db3\u591f\u6743\u9650\u7684Secret Key"}]})(m.default.createElement(s.default,{type:"password",placeholder:"Secret Key"})))))}},u=c))||u);t.default=g},PCLb:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var i=l(a("Vl3Y")),s=l(a("jehZ"));a("DZo9");var r=l(a("8z0m"));a("T2oS");var d=l(a("W9HT"));a("Pwec");var o,u,c,f=l(a("CtXQ")),m=n(a("q1tI")),h=a("MuoO"),p=l(a("nyIC")),g=l(a("8+Sn")),b=l(a("e6Ls")),v=(o=(0,h.connect)(),o((c=class extends m.PureComponent{constructor(e){super(e),this.handleLogoChange=(e=>{"uploading"!==e.file.status?"done"===e.file.status&&e.file&&e.file.response&&e.file.response.data&&e.file.response.data.bean&&e.file.response.data.bean.file_url&&this.setState({imageUrl:e.file.response.data.bean.file_url,loading:!1}):this.setState({loading:!0})}),this.handleLogoRemove=(()=>{this.setState({imageUrl:""})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={loading:!1,imageUrl:""}}componentDidMount(){var e=this.props.initialValue;this.setState({imageUrl:e||""})}render(){var e=this.props,t=e.label,a=e.extra,l=e.initialValue,n=e.form,o=e.imgstyle,u=e.uploadBtnStyle,c=e.formItemLayout,h=e.name,v=e.message,E=e.required,C=void 0===E||E,y=n.getFieldDecorator,_=this.state,O=_.loading,I=_.imageUrl,k=g.default.get("token"),x={};k&&(x.Authorization="GRJWT ".concat(k));var S=m.default.createElement("div",{style:u},m.default.createElement(f.default,{type:"plus"}),m.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20\u56fe\u6807"));return m.default.createElement(i.default.Item,(0,s.default)({},c,{label:t,extra:a}),y(h,{initialValue:l,rules:[{required:C,message:v||"\u8bf7\u4e0a\u4f20\u56fe\u6807"}]})(m.default.createElement(r.default,{name:"file",accept:"image/jpg,image/jpeg,image/png",className:b.default.customUpload,action:p.default.imageUploadUrl,listType:"picture-card",headers:x,showUploadList:!1,onChange:this.handleLogoChange,onRemove:this.handleLogoRemove,loading:O},I?m.default.createElement(d.default,{spinning:O},m.default.createElement("img",{src:I,alt:"avatar",style:o})):S)))}},u=c))||u),E=v;t.default=E},RsBk:function(e,t,a){e.exports={automaTictelescopingSwitch:"automaTictelescopingSwitch___1-Vy7",btns:"btns___s2FpH",bor:"bor___1c09Y"}},h1Cg:function(e,t,a){e.exports={clearConform:"clearConform___11ZDZ",conformDesc:"conformDesc___9X9l4",clearConformMinTitle:"clearConformMinTitle___1eavz",formWrap:"formWrap___4CogU",thirdModal:"thirdModal___1zMBq",lists:"lists___1XwSr",listItem:"listItem___16Bib",listItemMataTitle:"listItemMataTitle___5I9Qk",listItemMataDesc:"listItemMataDesc___3BQqP",listItemMataBranch:"listItemMataBranch___2RgZn"}},hEzB:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),s=l(a("jehZ"));a("OaEy");var r=l(a("2fM7"));a("y8nQ");var d,o,u,c,f=l(a("Vl3Y")),m=n(a("q1tI")),h=a("MuoO"),p=l(a("e6Ls")),g=l(a("hMqj")),b=f.default.Item,v=r.default.Option,E=(d=f.default.create(),o=(0,h.connect)(e=>{var t=e.user;return{currUser:t.currentUser}},null,null,{withRef:!0}),d(u=o((c=class extends m.PureComponent{constructor(e){super(e),this.onSearch=(e=>{this.loadTeams(e)}),this.loadRoles=(()=>{var e=this.props,t=e.dispatch,a=e.eid;t({type:"global/fetchEnterpriseRoles",payload:{enterprise_id:a},callback:e=>{e&&this.setState({roles:e.list||[]})}})}),this.loadTeams=(e=>{var t=this.props,a=t.dispatch,l=t.eid;a({type:"global/fetchEnterpriseUsers",payload:{enterprise_id:l,page:1,page_size:999,name:e},callback:e=>{e&&this.setState({adminList:e.list})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={adminList:[],roles:["app_store","admin"]}}componentDidMount(){this.loadTeams(),this.loadRoles()}render(){var e=this.state,t=e.adminList,a=e.roles,l=this.props,n=(l.onOk,l.onCancel),d=(l.actions,l.info),o=l.form,u=o.getFieldDecorator,c={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return m.default.createElement(i.default,{title:d?"\u7f16\u8f91\u7ba1\u7406\u5458":"\u6dfb\u52a0\u7ba1\u7406\u5458",visible:!0,className:p.default.TelescopicModal,onOk:this.handleSubmit,onCancel:n},m.default.createElement(f.default,{onSubmit:this.handleSubmit,layout:"horizontal"},m.default.createElement(b,(0,s.default)({},c,{label:"\u7528\u6237\u540d\u79f0"}),u("user_id",{initialValue:d&&d.user_id||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}]})(m.default.createElement(r.default,{showSearch:!0,style:{width:300},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0",optionFilterProp:"children",onSearch:this.onSearch,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},t&&t.length>0&&t.map(e=>{var t=e.nick_name,a=e.user_id;return m.default.createElement(v,{key:a,value:a},t)})))),m.default.createElement(b,(0,s.default)({},c,{label:"\u9009\u62e9\u89d2\u8272"}),u("roles",{initialValue:d&&d.roles||[],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}]})(m.default.createElement(r.default,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",style:{width:300}},a.map((e,t)=>{return m.default.createElement(v,{key:t,value:e},g.default.roleMap(e))}))))))}},u=c))||u)||u);t.default=E},"t9D+":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("BoS7");var s=l(a("Sdc0"));a("5NDa");var r=l(a("5rEg"));a("y8nQ");var d=l(a("Vl3Y")),o=l(a("jehZ"));a("+L6B");var u=l(a("2/Rp"));a("OaEy");var c,f,m,h=l(a("2fM7")),p=a("MuoO"),g=n(a("q1tI")),b=l(a("LdkA")),v=l(a("DVfu")),E=l(a("e6Ls")),C=l(a("h1Cg")),y=h.default.Option,_=(c=(0,p.connect)(),c((m=class extends g.PureComponent{constructor(e){var t;super(e),t=this,this.handleEdit=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.setState({edit:e})},this.fetchOauthType=(()=>{var e=this.props.dispatch;e({type:"user/fetchOauthType",callback:e=>{e&&200===e._code&&this.setState({oauthList:e.bean&&e.bean.oauth_type})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={oauthList:[],edit:!1}}componentDidMount(){this.fetchOauthType();var e=this.props.oauthInfo;e&&this.handleEdit()}componentWillUpdate(e){var t=e.oauthInfo;t&&this.handleEdit()}render(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldValue,l=this.props,n=l.onCancel,c=l.loading,f=l.oauthInfo,m=this.state,p=m.edit,_=m.oauthList,O={labelCol:{span:8},wrapperCol:{span:16}},I=a("oauth_type")||"github";return g.default.createElement(i.default,{visible:!0,title:p?"OAuth\u914d\u7f6e\u7f16\u8f91":"\u6dfb\u52a0Oauth\u670d\u52a1",maskClosable:!1,onOk:this.handleSubmit,onCancel:n,width:600,className:E.default.TelescopicModal,footer:[g.default.createElement(u.default,{type:"primary",loading:c,onClick:this.handleSubmit},"\u786e\u5b9a"),g.default.createElement(u.default,{onClick:n},"\u53d6\u6d88")]},g.default.createElement(d.default,{layout:"horizontal",hideRequiredMark:!0,onSubmit:this.handleSubmit},g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:b.default,alt:""}),"OAuth\u7c7b\u578b")}),t("oauth_type",{initialValue:f?f.oauth_type:"github",rules:[{required:!0,message:"\u8bf7\u9009\u62e9oauth_type\u7c7b\u578b"}]})(g.default.createElement(h.default,{disabled:p,placeholder:"\u8bf7\u9009\u62e9\u8981oauth_type\u7c7b\u578b"},_&&_.map(e=>g.default.createElement(y,{key:e,value:e},e)))),p&&g.default.createElement("div",{className:C.default.conformDesc},"\u5982\u9700\u7f16\u8f91\u7c7b\u578b\uff0c\u8bf7\u5220\u9664\u914d\u7f6e\u540e\u91cd\u65b0\u6dfb\u52a0")),g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:b.default,alt:""}),"\u540d\u79f0")}),t("name",{initialValue:f?f.name:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{max:32,message:"\u6700\u5927\u957f\u5ea632\u4f4d"}]})(g.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})),g.default.createElement("div",{className:C.default.conformDesc},"OAuth\u670d\u52a1\u663e\u793a\u540d\u79f0")),"github"!==I&&g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:v.default,alt:""}),"\u670d\u52a1\u5730\u5740")}),t("home_url",{initialValue:f?f.home_url:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u670d\u52a1\u5730\u5740"},{type:"url",message:"\u8f93\u5165\u6570\u636e\u4e0d\u662f\u5408\u6cd5\u7684URL"},{max:255,message:"\u6700\u5927\u957f\u5ea6255\u4f4d"}]})(g.default.createElement(r.default,{disabled:p,placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u5730\u5740"})),g.default.createElement("div",{className:C.default.conformDesc},"\u7b2c\u4e09\u65b9\u670d\u52a1\u8bbf\u95ee\u5730\u5740")),g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:v.default,alt:""}),"\u5ba2\u6237\u7aefID")}),t("client_id",{initialValue:f?f.client_id:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165client_id"},{max:64,message:"\u6700\u5927\u957f\u5ea664\u4f4d"}]})(g.default.createElement(r.default,{disabled:p,placeholder:"\u8bf7\u8f93\u5165client_id"})),g.default.createElement("div",{className:C.default.conformDesc},"Client ID")),g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:v.default,alt:""}),"\u5ba2\u6237\u7aef\u5bc6\u94a5")}),t("client_secret",{initialValue:f?f.client_secret:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165client_secret"},{max:64,message:"\u6700\u5927\u957f\u5ea664\u4f4d"}]})(g.default.createElement(r.default,{disabled:p,placeholder:"\u8bf7\u8f93\u5165client_secret"})),g.default.createElement("div",{className:C.default.conformDesc},"Client Secret")),g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:v.default,alt:""}),"\u5e73\u53f0\u8bbf\u95ee\u57df\u540d")}),t("redirect_domain",{initialValue:f?f.redirect_uri.replace("/console/oauth/redirect",""):"".concat(window.location.protocol,"//").concat(window.location.host),rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5e73\u53f0\u8bbf\u95ee\u57df\u540d"},{type:"url",message:"\u8f93\u5165\u6570\u636e\u4e0d\u662f\u5408\u6cd5\u7684URL"},{max:255,message:"\u6700\u5927\u957f\u5ea6255\u4f4d"}]})(g.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u8bbf\u95ee\u57df\u540d"})),g.default.createElement("div",{className:C.default.conformDesc},"\u5e73\u53f0\u8bbf\u95ee\u57df\u540d\u662f\u7528\u4e8eOAuth\u8ba4\u8bc1\u5b8c\u56de\u8df3\u65f6\u7684\u8bbf\u95ee\u5730\u5740\uff0c\u56de\u8df3\u8def\u5f84\u4e3a\uff1a/console/oauth/redirect")),g.default.createElement(d.default.Item,(0,o.default)({className:C.default.clearConform},O,{label:g.default.createElement("div",{className:C.default.clearConformMinTitle},g.default.createElement("img",{src:v.default,alt:""}),"\u81ea\u52a8\u767b\u5f55")}),t("is_auto_login",{initialValue:!!f&&f.is_auto_login,rules:[{required:!0,message:"\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u81ea\u52a8\u767b\u5f55\u9009\u9879"}]})(g.default.createElement(s.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",defaultChecked:!!f&&f.is_auto_login})),g.default.createElement("div",{className:C.default.conformDesc},"\u5f00\u542f\u81ea\u52a8\u767b\u5f55\u5373\u9700\u8981\u767b\u5f55\u65f6\u5c06\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5Oauth\u670d\u52a1\u8fdb\u884c\u8ba4\u8bc1\uff0c\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\u6548\u679c"))))}},f=m))||f),O=d.default.create()(_),I=O;t.default=I},zmPw:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=l(a("W9HT"));a("IzEo");var s=l(a("bx4M"));a("14J3");var r=l(a("BMrR"));a("BoS7");var d=l(a("Sdc0"));a("jCWc");var o=l(a("kPKH")),u=l(a("p0pE"));a("/xke");var c,f,m,h,p,g=l(a("TeRw")),b=a("MuoO"),v=n(a("q1tI")),E=l(a("W2Kv")),C=l(a("6ryS")),y=l(a("HzM2")),_=l(a("q76B")),O=l(a("Bq0W")),I=l(a("+XgA")),k=l(a("mWxT")),x=l(a("RsBk")),S=l(a("AqsJ")),A=(c=(0,b.connect)(e=>{var t=e.user,a=e.list,l=e.loading,n=e.global,i=e.index;return{user:t.currentUser,list:a,loading:l.models.list,rainbondInfo:n.rainbondInfo,enterprise:n.enterprise,isRegist:n.isRegist,oauthLongin:l.effects["global/creatOauth"],certificateLongin:l.effects["global/putCertificateType"],imageHubLongin:l.effects["global/editImageHub"],objectStorageLongin:l.effects["global/editCloudBackup"],overviewInfo:i.overviewInfo}}),c((m=class extends v.PureComponent{constructor(e){super(e),this.onRegistChange=(e=>{this.props.dispatch({type:"global/putIsRegist",payload:{isRegist:e}})}),this.handlChooseeOpen=(()=>{var e=this.state.israinbondTird;e?this.handleOpenDomain():this.handelIsOpen(!0)}),this.handleOpenDomain=(()=>{this.setState({showDeleteDomain:!0})}),this.handelIsOpen=(e=>{var t=this.props.dispatch;t({type:"global/editOauth",payload:{arr:{enable:e,value:null}},callback:t=>{t&&200===t._code&&(g.default.success({message:e?"\u5f00\u542fOauth2.0\u8ba4\u8bc1":"\u5173\u95ed\u6210\u529f"}),this.fetchEnterpriseInfo())}})}),this.handelIsOpenImageHub=((e,t)=>{var a=this.props,l=a.dispatch,n=a.match.params.eid,i=this.state,s=i.AppstoreImageHubValue,r=i.isEnableAppstoreImageHub,d=t||s||{};l({type:"global/editImageHub",payload:{enterprise_id:n,enable:e,hub_url:d.hub_url,namespace:d.namespace,hub_user:d.hub_user,hub_password:d.hub_password},callback:a=>{a&&200===a._code&&(g.default.success({message:r?e&&t?"\u4fee\u6539\u6210\u529f":"\u5173\u95ed\u6210\u529f":"\u5f00\u901a\u6210\u529f"}),this.fetchEnterpriseInfo(),this.handelCloseImageHub())}})}),this.handelIsOpenCloudBackup=((e,t)=>{var a=this.props,l=a.dispatch,n=a.match.params.eid,i=this.state,s=i.ObjectStorageValue,r=i.isEnableObjectStorage,d=t||s||{};l({type:"global/editCloudBackup",payload:{enterprise_id:n,enable:e,provider:d.provider,endpoint:d.endpoint,bucket_name:d.bucket_name,access_key:d.access_key,secret_key:d.secret_key},callback:a=>{a&&200===a._code&&(g.default.success({message:r?e&&t?"\u4fee\u6539\u6210\u529f":"\u5173\u95ed\u6210\u529f":"\u5f00\u901a\u6210\u529f"}),this.fetchEnterpriseInfo(),this.handelCloseCloudBackup())}})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,l=this.state,n=l.openCertificate,i=l.closeCertificate;if(t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:a},callback:e=>{!e||n||i||this.setState({israinbondTird:k.default.OauthEnterpriseEnable(e.bean),isEnableAppstoreImageHub:k.default.isEnableAppstoreImageHub(e.bean),isEnableObjectStorage:k.default.isEnableObjectStorage(e.bean),AppstoreImageHubValue:k.default.fetchAppstoreImageHub(e.bean),ObjectStorageValue:k.default.fetchObjectStorage(e.bean)})}}),n||i)return this.handelCloseCertificate(),null;t({type:"user/fetchCurrent"}),this.handelClone()}),this.handelClone=(()=>{this.setState({showDeleteDomain:!1})}),this.handelOpenCertificate=(()=>{this.setState({openCertificate:!0})}),this.handelOpenCloseCertificate=(()=>{this.setState({closeCertificate:!0})}),this.handelOpenCloseImageHub=(()=>{this.setState({closeImageHub:!0})}),this.handelOpenImageHub=(()=>{this.setState({openImageHub:!0})}),this.handelCloseCertificate=(()=>{this.setState({closeCertificate:!1,openCertificate:!1})}),this.handelCloseImageHub=(()=>{this.setState({closeImageHub:!1,openImageHub:!1})}),this.handelOpenCloudBackup=(()=>{this.setState({openCloudBackup:!0})}),this.handelOpenCloseCloudBackup=(()=>{this.setState({closeCloudBackup:!0})}),this.handelCloseCloudBackup=(()=>{this.setState({closeCloudBackup:!1,openCloudBackup:!1})}),this.handelOpenBasicInformation=(()=>{this.setState({openBasicInformation:!0})}),this.handelCloseBasicInformation=(()=>{this.setState({openBasicInformation:!1})}),this.handelIsOpenBasicInformation=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid;a({type:"global/putBasicInformation",payload:(0,u.default)({},e,{enterprise_id:l}),callback:()=>{this.handelCloseBasicInformation(),this.fetchEnterpriseInfo(),a({type:"global/fetchRainbondInfo",callback:e=>{if(e){var t=k.default.fetchFavicon(e),a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type="image/x-icon",a.rel="shortcut icon",a.href=t,document.getElementsByTagName("head")[0].appendChild(a)}}})}})}),this.createClusters=(e=>{var t=this.props,a=t.dispatch,l=t.enterprise,n=t.match.params.eid,i=k.default.CertificateIssuedByEnable(l);if(e&&e.auto_ssl_config&&!this.isJSON(e.auto_ssl_config))return null;a({type:"global/putCertificateType",payload:{enterprise_id:n,auto_ssl:{enable:!!e,value:!!e&&e.auto_ssl_config}},callback:t=>{t&&200===t._condition&&(g.default.success({message:e?i?"\u7f16\u8f91\u6210\u529f":"\u5f00\u901a\u6210\u529f":"\u5173\u95ed\u6210\u529f"}),this.fetchEnterpriseInfo())}})}),this.isJSON=(e=>{var t=()=>{g.default.warning({message:"\u683c\u5f0f\u9519\u8bef\u3001\u8bf7\u8f93\u5165\u6b63\u786e\u7684JSON\u683c\u5f0f"})};if("string"===typeof e)try{var a=JSON.parse(e);return!("object"!==typeof a||!a)||(t(),!1)}catch(e){return t(),!1}return t(),!1});var t=this.props.enterprise;this.state={enterpriseAdminLoading:!1,showDeleteDomain:!1,openCertificate:!1,closeCertificate:!1,closeImageHub:!1,openImageHub:!1,openCloudBackup:!1,closeCloudBackup:!1,openBasicInformation:!1,israinbondTird:k.default.OauthEnterpriseEnable(t),isEnableAppstoreImageHub:k.default.isEnableAppstoreImageHub(t),AppstoreImageHubValue:k.default.fetchAppstoreImageHub(t),isEnableObjectStorage:k.default.isEnableObjectStorage(t),ObjectStorageValue:k.default.fetchObjectStorage(t),providers:[{key:"alioss",name:"\u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8"},{key:"s3",name:"S3"}]}}componentDidMount(){var e=this.props.dispatch;e({type:"global/getIsRegist"})}render(){var e=this.props,t=e.enterprise,a=e.oauthLongin,l=e.certificateLongin,n=e.imageHubLongin,u=e.objectStorageLongin,c=e.rainbondInfo,f=e.match.params.eid,m={};if(c){var h=k.default.fetchLogo(c,t)||E.default,p=k.default.fetchFavicon(t),g=c&&c.title&&c.title.value,b=t&&t.enterprise_alias||c&&c.enterprise_alias;m={logo:h,title:g,enterprise_alias:b,favicon:p}}var A=k.default.isEnterpriseEdition(c),w=this.state,D=w.enterpriseAdminLoading,T=w.showDeleteDomain,L=w.israinbondTird,M=w.isEnableAppstoreImageHub,B=w.AppstoreImageHubValue,q=w.isEnableObjectStorage,V=w.ObjectStorageValue,N=w.openCertificate,R=w.closeCertificate,j=w.openOauthTable,H=w.openImageHub,P=w.closeImageHub,F=w.openCloudBackup,X=w.closeCloudBackup,U=w.providers,W=w.openBasicInformation,Z=v.default.createElement(s.default,{hoverable:!0,bordered:!1,style:{borderTop:A?"1px solid  #ccc":"none"}},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"\u7528\u6237\u6ce8\u518c"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u63a7\u5236\u7528\u6237\u662f\u5426\u53ef\u4ee5\u6ce8\u518c\u529f\u80fd")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},v.default.createElement(d.default,{onChange:this.onRegistChange,className:x.default.automaTictelescopingSwitch,checked:this.props.isRegist})))),z=v.default.createElement("div",null,v.default.createElement(s.default,{style:{borderTop:"1px solid  #ccc"},hoverable:!0,bordered:!1},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"Oauth\u4e92\u8054"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u652f\u6301Github\u3001Gitlab\u3001\u7801\u4e91\u7b49\u591a\u79cd\u7b2c\u4e09\u65b9OAuth\u670d\u52a1\uff0c\u7528\u6237\u4e92\u8054\u540e\u53ef\u83b7\u53d6\u4ed3\u5e93\u9879\u76ee\u3002")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},L&&v.default.createElement("a",{onClick:()=>{this.setState({openOauthTable:!0})},style:{marginRight:"10px"}},"\u67e5\u770b\u914d\u7f6e"),v.default.createElement(d.default,{onChange:this.handlChooseeOpen,checked:L,className:x.default.automaTictelescopingSwitch}))))),K=k.default.CertificateIssuedByEnable(t),J=v.default.createElement(s.default,{hoverable:!0,bordered:!1,style:{borderTop:"1px solid  #ccc"}},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"\u81ea\u52a8\u7b7e\u53d1\u8bc1\u4e66"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u8fd9\u662f\u4e00\u4e2a\u5916\u90e8\u6269\u5145\u529f\u80fd\uff0c\u5b9e\u73b0\u7f51\u5173\u7b56\u7565\u6240\u9700\u8bc1\u4e66\u7684\u81ea\u52a8\u7b7e\u53d1\u3002")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},K&&v.default.createElement("a",{onClick:this.handelOpenCertificate,style:{marginRight:"10px"}},"\u67e5\u770b\u914d\u7f6e"),v.default.createElement(d.default,{onChange:()=>{K?this.handelOpenCloseCertificate():this.handelOpenCertificate()},checked:K,className:x.default.automaTictelescopingSwitch})))),Q=v.default.createElement(s.default,{hoverable:!0,bordered:!1,style:{borderTop:"1px solid  #ccc"}},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"\u7ec4\u4ef6\u5e93\u955c\u50cf\u4ed3\u5e93"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u7528\u4e8e\u5b58\u50a8\u5206\u4eab\u5230\u7ec4\u4ef6\u5e93\u7684\u5e94\u7528\u6a21\u578b\u955c\u50cf\uff0c\u5176\u9700\u8981\u80fd\u88ab\u6240\u6709\u96c6\u7fa4\u8bbf\u95ee")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},M&&v.default.createElement("a",{onClick:this.handelOpenImageHub,style:{marginRight:"10px"}},"\u67e5\u770b\u914d\u7f6e"),v.default.createElement(d.default,{onChange:()=>{M?this.handelOpenCloseImageHub():this.handelOpenImageHub()},checked:M,className:x.default.automaTictelescopingSwitch})))),Y=v.default.createElement(s.default,{hoverable:!0,bordered:!1,style:{borderTop:"1px solid  #ccc"}},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"\u5bf9\u8c61\u5b58\u50a8"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u5bf9\u8c61\u5b58\u50a8\u7528\u4e8e\u4e91\u7aef\u5907\u4efd\u529f\u80fd\uff0c\u5b58\u50a8\u5e94\u7528\u7684\u5907\u4efd\u6587\u4ef6")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},q&&v.default.createElement("a",{onClick:this.handelOpenCloudBackup,style:{marginRight:"10px"}},"\u67e5\u770b\u914d\u7f6e"),v.default.createElement(d.default,{onChange:()=>{q?this.handelOpenCloseCloudBackup():this.handelOpenCloudBackup()},checked:q,className:x.default.automaTictelescopingSwitch})))),G=v.default.createElement(s.default,{style:{marginTop:"10px"},hoverable:!0,bordered:!1},v.default.createElement(r.default,{type:"flex",align:"middle"},v.default.createElement(o.default,{span:3},"\u57fa\u7840\u4fe1\u606f"),v.default.createElement(o.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},"\u53ef\u4ee5\u4fee\u6539\u7f51\u7ad9\u7684\u6807\u9898\u3001\u4f01\u4e1a\u540d\u79f0\u3001LOGO\u3001\u7f51\u9875\u56fe\u6807")),v.default.createElement(o.default,{span:4,style:{textAlign:"right"}},v.default.createElement("a",{onClick:this.handelOpenBasicInformation,style:{marginRight:"10px"}},"\u67e5\u770b\u914d\u7f6e"))));return v.default.createElement(v.Fragment,null,N&&v.default.createElement(C.default,{eid:f,AutomaticCertificate:K,loading:l,onCancel:this.handelCloseCertificate,onOk:e=>{this.createClusters(e)}}),H&&v.default.createElement(O.default,{eid:f,title:M?"\u7ec4\u4ef6\u5e93\u955c\u50cf\u4ed3\u5e93":"\u5f00\u901a\u7ec4\u4ef6\u5e93\u955c\u50cf\u4ed3\u5e93",loading:n,onCancel:this.handelCloseImageHub,data:B,onOk:e=>{this.handelIsOpenImageHub(!0,e)}}),F&&v.default.createElement(y.default,{eid:f,title:q?"\u5bf9\u8c61\u5b58\u50a8":"\u914d\u7f6e\u4e91\u7aef\u5907\u4efd\u5bf9\u8c61\u5b58\u50a8",loading:u,onCancel:this.handelCloseCloudBackup,data:V,providers:U,onOk:e=>{this.handelIsOpenCloudBackup(!0,e)}}),W&&v.default.createElement(I.default,{title:"\u57fa\u7840\u4fe1\u606f",eid:f,loading:u,data:m,onCancel:this.handelCloseBasicInformation,onOk:this.handelIsOpenBasicInformation}),(P||R||T||X)&&v.default.createElement(_.default,{loading:P?n:R?l:T?a:!!X&&u,title:"\u5173\u95ed",desc:P?"\u786e\u5b9a\u8981\u5173\u95ed\u7ec4\u4ef6\u5e93\u955c\u50cf\u4ed3\u5e93\uff1f":R?"\u786e\u5b9a\u8981\u5173\u95ed\u81ea\u52a8\u7b7e\u53d1\u8bc1\u4e66\uff1f":T?"\u786e\u5b9a\u8981\u5173\u95edOauth2.0\u8ba4\u8bc1\uff1f":X?"\u786e\u5b9a\u8981\u5173\u95ed\u5bf9\u8c61\u5b58\u50a8\uff1f":"",onOk:()=>{P?this.handelIsOpenImageHub(!1):R?this.createClusters(!1):T?this.handelIsOpen(!1):X&&this.handelIsOpenCloudBackup(!1)},onCancel:()=>{P?this.handelCloseImageHub():R?this.handelCloseCertificate():T?this.handelClone():X&&this.handelCloseCloudBackup()}}),j&&v.default.createElement(S.default,{eid:f,onOk:()=>{this.setState({openOauthTable:!1})},onCancel:()=>{this.setState({openOauthTable:!1})}}),D?v.default.createElement("div",{className:x.default.example},v.default.createElement(i.default,null)):v.default.createElement("div",null,A&&G,Z,J,z,Q,Y))}},f=m))||f),w=(h=(0,b.connect)(e=>{var t=e.global;return{enterprise:t.enterprise}}),h(p=class extends v.PureComponent{render(){var e=this.props.enterprise;return e?v.default.createElement(A,this.props):null}})||p);t.default=w}}]);